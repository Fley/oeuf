(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,n){},127:function(e,t,n){},242:function(e,t,n){},244:function(e,t,n){},247:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(40),i=n.n(c),s=n(13),o=n(14),E=n(16),u=n(15),l=n(17),d=(n(99),n(101),function(e){var t=e.children;return a.a.Children.only(t),a.a.createElement(a.a.Fragment,null,t)}),p=n(30),m=n(26),S=function(e){return e.exercises.ids.map(function(t){return e.exercises.byId[t]})},f=function(e){return function(t){return e.exercises.byId[t]}},x=function(e){return e.exercises.loading},b=function(e){return!!e.exercises.error},C=n(249),h=n(8),I=n(51),v=n(6),R=n(25),g=n.n(R),T=function(e){var t=e.header,n=e.children,r=e.navItems,c=void 0===r?[]:r,i=e.headerBackground,s=void 0===i?{className:"bg-white",isLight:!0}:i;return a.a.createElement(a.a.Fragment,null,a.a.createElement("header",{className:g()("navbar justify-content-start sticky-top shadow-sm",s.className,{"navbar-light":s.isLight,"navbar-dark":!s.isLight})},t),a.a.createElement("main",{className:"col-sm-10 mx-auto mb-5 py-3 px-0 px-xs-2"},n),a.a.createElement("nav",{className:"navbar fixed-bottom navbar-light bg-white p-0 navbar-expand shadow-up-sm"},a.a.createElement("ul",{className:"navbar-nav nav-justified w-100"},c.map(function(e,t){return a.a.createElement("li",{key:"nav-item-".concat(t),className:"nav-item"},e)}))))},O=function(e){var t=e.children,n=e.className;return a.a.createElement("div",{className:g()("d-flex align-items-center w-100 text-center bg-light text-dark",n),style:{height:"100vh",position:"fixed",top:0,left:0}},a.a.createElement("section",{className:"m-auto"},t))},y=function(e){var t=e.icon,n=e.text,r=e.action;return a.a.createElement(O,null,a.a.createElement("div",null,t&&a.a.createElement(h.a,{icon:t,size:"7x"})),a.a.createElement("div",null,n),r&&a.a.createElement("nav",{className:"m-5"},r))},w=n(90),j=n.n(w),_=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(E.a)(this,Object(u.a)(t).call(this,e))).onChangeIndex=function(e){n.setState({index:e})},n.onTransitionEnd=function(){0===n.state.index?n.props.onSwipeLeft():2===n.state.index&&n.props.onSwipeRight()},n.state={index:1},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,r=e.rightSwipeElement,c=e.leftSwipeElement;return a.a.createElement("li",{className:t},a.a.createElement(j.a,{index:this.state.index,onTransitionEnd:this.onTransitionEnd,onChangeIndex:this.onChangeIndex},c,n,r))}}]),t}(r.Component),U=function(){return a.a.createElement("div",{className:"d-flex bg-success text-white py-3 px-3 h-100 justify-content-end"},a.a.createElement(h.a,{icon:v.c,className:"align-self-center"}))},k=function(){return a.a.createElement("div",{className:"bg-danger text-white py-3 px-3 h-100"},a.a.createElement(h.a,{icon:v.q,className:"align-self-center"}))},N=function(){return a.a.createElement("div",{className:"d-flex bg-warning text-white py-3 px-3 h-100 justify-content-end"},a.a.createElement(h.a,{icon:v.s,className:"align-self-center"}))},A=(n(127),function(e,t){return function(n){var r=n.id,c=n.name,i=n.done;return a.a.createElement(_,{key:"exercise-".concat(r),className:"list-group-item p-0 "+(i?"list-group-item-success":""),onSwipeLeft:function(){return e(r)},onSwipeRight:function(){return t(r)},leftSwipeElement:i?a.a.createElement(N,null):a.a.createElement(U,null),rightSwipeElement:a.a.createElement(k,null)},a.a.createElement(C.a,{to:"/".concat(r),className:"d-flex py-3 px-3 list-group-item-action ".concat(i?"list-group-item-success":""," h-100")},a.a.createElement("span",{className:"flex-grow-1 p-1"},c),a.a.createElement("div",{className:"d-none d-sm-block btn-toolbar list-toolbar-hover",role:"toolbar","aria-label":"Toolbar with actions on the exercise"},a.a.createElement("button",{type:"button",className:"btn btn-outline-dark rounded-circle border-0 mx-1","aria-label":"Delete",onClick:function(e){t(r),e.preventDefault()}},a.a.createElement(h.a,{icon:v.r})),a.a.createElement("button",{type:"button",className:"btn btn-outline-dark rounded-circle border-0 mx-1","aria-label":"Complete",onClick:function(t){e(r),t.preventDefault()}},i?a.a.createElement(h.a,{icon:v.s}):a.a.createElement(h.a,{icon:v.c}))),a.a.createElement("span",{className:"p-1 ml-1"},a.a.createElement(h.a,{icon:v.a}))))}}),X=function(e){var t=e.exercises,n=void 0===t?[]:t,r=e.onAddExercise,c=e.onAcknowledgeExercise,i=e.onDeleteExercise,s=e.onCancelExercise,o=e.loading,E=void 0!==o&&o,u=e.errorLoading,l=void 0!==u&&u;return n.length>0?a.a.createElement("ul",{className:"list-group shadow-y-sm"},n&&n.filter(function(e){return!e.done}).map(A(c,i)),n&&n.filter(function(e){return e.done}).map(A(s,i))):E?a.a.createElement(y,{text:"Loading ...",icon:v.p,action:a.a.createElement("p",null,"Your exercises are being loaded")}):l?a.a.createElement(y,{text:"Error loading your exercises",icon:v.j,action:a.a.createElement("p",null,"Sorry an error occured loading your exercices !")}):a.a.createElement(y,{text:"You have no exercises yet",icon:I.a,action:a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{className:"btn btn-primary m-1",onClick:function(){return r()}},"Create your first exercise"),a.a.createElement("button",{className:"btn btn-outline-primary m-1"},"Import exercises"))})},D=function(e){var t=e.loading,n=void 0!==t&&t,r=e.errorLoading,c=void 0!==r&&r,i=e.exercises,s=e.onAddExercise,o=e.onDeleteExercise,E=e.onAcknowledgeExercise,u=e.onCancelExercise;return a.a.createElement(T,{header:a.a.createElement("span",{className:"navbar-brand mb-0 h1"},"Exercises"),headerBackground:{className:"bg-primary",isLight:!1},navItems:[a.a.createElement("button",{key:"nav-new-exercise",className:"btn btn-link nav-link",disabled:n||c,onClick:function(){return s()}},a.a.createElement(h.a,{icon:v.i})," New exercise")]},a.a.createElement(X,{exercises:i,onAddExercise:s,onDeleteExercise:o,onAcknowledgeExercise:E,onCancelExercise:u,loading:n,errorLoading:c}))},L=n(7),P=n(54),F=n.n(P),Q={FETCH_EXERCISES:{REQUEST:"exercises/FETCH_EXERCISES/REQUEST",SUCCESS:"exercises/FETCH_EXERCISES/SUCCESS",FAILURE:"exercises/FETCH_EXERCISES/FAILURE"},FETCH_EXERCISE:{REQUEST:"exercises/FETCH_EXERCISE/REQUEST",SUCCESS:"exercises/FETCH_EXERCISE/SUCCESS",FAILURE:"exercises/FETCH_EXERCISE/FAILURE"},ADD_EXERCISE:{REQUEST:"exercises/ADD_EXERCISE/REQUEST",SUCCESS:"exercises/ADD_EXERCISE/SUCCESS",FAILURE:"exercises/ADD_EXERCISE/FAILURE"},DELETE_EXERCISE:{REQUEST:"exercises/DELETE_EXERCISE/REQUEST",SUCCESS:"exercises/DELETE_EXERCISE/SUCCESS",FAILURE:"exercises/DELETE_EXERCISE/FAILURE"},ACKNOWLEDGE_EXERCISE:{REQUEST:"exercises/ACKNOWLEDGE_EXERCISE/REQUEST",SUCCESS:"exercises/ACKNOWLEDGE_EXERCISE/SUCCESS",FAILURE:"exercises/ACKNOWLEDGE_EXERCISE/FAILURE"},CANCEL_EXERCISE:{REQUEST:"exercises/CANCEL_EXERCISE/REQUEST",SUCCESS:"exercises/CANCEL_EXERCISE/SUCCESS",FAILURE:"exercises/CANCEL_EXERCISE/FAILURE"},UPDATE_EXERCISE_NAME:{REQUEST:"exercises/UPDATE_EXERCISE_NAME/REQUEST",SUCCESS:"exercises/UPDATE_EXERCISE_NAME/SUCCESS",FAILURE:"exercises/UPDATE_EXERCISE_NAME/FAILURE"},ADD_EXERCISE_STEP:{REQUEST:"exercises/ADD_EXERCISE_STEP/REQUEST",SUCCESS:"exercises/ADD_EXERCISE_STEP/SUCCESS",FAILURE:"exercises/ADD_EXERCISE_STEP/FAILURE"},DELETE_EXERCISE_STEP:{REQUEST:"exercises/DELETE_EXERCISE_STEP/REQUEST",SUCCESS:"exercises/DELETE_EXERCISE_STEP/SUCCESS",FAILURE:"exercises/DELETE_EXERCISE_STEP/FAILURE"},ACKNOWLEDGE_EXERCISE_STEP:{REQUEST:"exercises/ACKNOWLEDGE_EXERCISE_STEP/REQUEST",SUCCESS:"exercises/ACKNOWLEDGE_EXERCISE_STEP/SUCCESS",FAILURE:"exercises/ACKNOWLEDGE_EXERCISE_STEP/FAILURE"},CANCEL_EXERCISE_STEP:{REQUEST:"exercises/CANCEL_EXERCISE_STEP/REQUEST",SUCCESS:"exercises/CANCEL_EXERCISE_STEP/SUCCESS",FAILURE:"exercises/CANCEL_EXERCISE_STEP/FAILURE"},UPDATE_EXERCISE_STEP:{REQUEST:"exercises/UPDATE_EXERCISE_STEP/REQUEST",SUCCESS:"exercises/UPDATE_EXERCISE_STEP/SUCCESS",FAILURE:"exercises/UPDATE_EXERCISE_STEP/FAILURE"},MOVE_EXERCISE_STEP:{REQUEST:"exercises/MOVE_EXERCISE_STEP/REQUEST",SUCCESS:"exercises/MOVE_EXERCISE_STEP/SUCCESS",FAILURE:"exercises/MOVE_EXERCISE_STEP/FAILURE"},START_EXERCISE:"exercises/START",STOP_EXERCISE:"exercises/STOP",PAUSE_EXERCISE:"exercises/PAUSE"},M=function(){return{type:Q.FETCH_EXERCISES.REQUEST}},G=function(e){return{type:Q.FETCH_EXERCISES.SUCCESS,exercises:e}},H=function(e){return{type:Q.FETCH_EXERCISES.FAILURE,error:e}},W=function(e){return{type:Q.FETCH_EXERCISE.SUCCESS,exercise:e}},K=function(e,t){return{type:Q.FETCH_EXERCISE.FAILURE,id:e,error:t}},V=function(e){return{type:Q.ADD_EXERCISE.SUCCESS,exercise:e}},B=function(e,t){return{type:Q.ADD_EXERCISE.FAILURE,exercise:e,error:t}},q=function(e){return{type:Q.DELETE_EXERCISE.SUCCESS,id:e}},z=function(e,t){return{type:Q.DELETE_EXERCISE.FAILURE,id:e,error:t}},Y=function(e){return{type:Q.ACKNOWLEDGE_EXERCISE.REQUEST,id:e}},J=function(e){return{type:Q.ACKNOWLEDGE_EXERCISE.SUCCESS,exercise:e}},$=function(e,t){return{type:Q.ACKNOWLEDGE_EXERCISE.FAILURE,exerciseId:e,error:t}},Z=function(e){return{type:Q.CANCEL_EXERCISE.SUCCESS,exercise:e}},ee=function(e,t){return{type:Q.CANCEL_EXERCISE.FAILURE,exerciseId:e,error:t}},te=function(e){return{type:Q.UPDATE_EXERCISE_NAME.SUCCESS,exercise:e}},ne=function(e,t){return{type:Q.UPDATE_EXERCISE_NAME.FAILURE,id:e,error:t}},re=function(e,t){return{type:Q.ACKNOWLEDGE_EXERCISE_STEP.REQUEST,exerciseId:e,stepId:t}},ae=function(e){return{type:Q.ACKNOWLEDGE_EXERCISE_STEP.SUCCESS,exercise:e}},ce=function(e,t,n){return{type:Q.ACKNOWLEDGE_EXERCISE_STEP.FAILURE,exerciseId:e,stepId:t,error:n}},ie=function(e){return{type:Q.CANCEL_EXERCISE_STEP.SUCCESS,exercise:e}},se=function(e,t,n){return{type:Q.CANCEL_EXERCISE_STEP.FAILURE,exerciseId:e,stepId:t,error:n}},oe=function(e){return{type:Q.ADD_EXERCISE_STEP.SUCCESS,exercise:e}},Ee=function(e,t){return{type:Q.ADD_EXERCISE_STEP.FAILURE,exerciseId:e,error:t}},ue=function(e,t){switch(e){case"timed":return Object(L.a)({duration:0,rest:0},t,{id:F()(),done:!1});case"repetition":return Object(L.a)({kg:0,repetition:1,rest:0},t,{id:F()(),done:!1});default:throw new Error('Unknown step type "'.concat(e,'"'))}},le=function(e){return{type:Q.DELETE_EXERCISE_STEP.SUCCESS,exercise:e}},de=function(e,t,n){return{type:Q.DELETE_EXERCISE_STEP.FAILURE,exerciseId:e,stepId:t,error:n}},pe=function(e){return{type:Q.UPDATE_EXERCISE_STEP.SUCCESS,exercise:e}},me=function(e,t,n,r){return{type:Q.DELETE_EXERCISE_STEP.FAILURE,exerciseId:e,stepId:t,contentPatch:n,error:r}},Se=function(e){return{type:Q.MOVE_EXERCISE_STEP.SUCCESS,exercise:e}},fe=function(e,t,n,r){return{type:Q.MOVE_EXERCISE_STEP.FAILURE,exerciseId:e,oldIndex:t,newIndex:n,error:r}},xe=function(e){function t(){return Object(s.a)(this,t),Object(E.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){0===this.props.exercises.length&&this.props.load()}},{key:"render",value:function(){var e=this.props,t=(e.load,Object(p.a)(e,["load"]));return a.a.createElement(D,t)}}]),t}(r.Component),be=Object(m.b)(function(e){return{exercises:S(e),loading:x(e),errorLoading:b(e)}},function(e){return{load:function(){return e(M())},onAddExercise:function(){return e(function(){var e={id:F()(),name:"New exercise",type:null,steps:[],done:!1,progress:null};return{type:Q.ADD_EXERCISE.REQUEST,exercise:e}}())},onDeleteExercise:function(t){return e(function(e){return{type:Q.DELETE_EXERCISE.REQUEST,id:e}}(t))},onAcknowledgeExercise:function(t){return e(Y(t))},onCancelExercise:function(t){return e(function(e){return{type:Q.CANCEL_EXERCISE.REQUEST,id:e}}(t))}}})(xe),Ce=n(18),he=n(29),Ie=Object(he.SortableHandle)(function(){return a.a.createElement("div",{className:"list-group-item-drag-handle",style:{width:"1em"}},a.a.createElement(h.a,{icon:v.b}))}),ve=function(e){var t=e.defaultValue,n=e.placeholder,r=e.onChange;return a.a.createElement("input",{type:"number",className:"form-control form-control-sm mx-auto",placeholder:n,defaultValue:"".concat(t),onChange:r,min:"0",max:"999",style:{width:"4em"},required:!0})},Re=function(e){var t=e.kg,n=e.repetition,r=e.rest,c=e.onContentChange;return a.a.createElement("div",{className:"d-flex justify-content-between p-3"},a.a.createElement("div",null,a.a.createElement(ve,{defaultValue:t,placeholder:"Kg",onChange:function(e){return c({kg:parseFloat(e.currentTarget.value)})}})),a.a.createElement("div",null,a.a.createElement(ve,{defaultValue:n,placeholder:"Repetition",onChange:function(e){return c({repetition:parseFloat(e.currentTarget.value)})}})),a.a.createElement("div",null,a.a.createElement(ve,{defaultValue:r,placeholder:"Rest",onChange:function(e){return c({rest:parseFloat(e.currentTarget.value)})}})),a.a.createElement(Ie,null))},ge=function(){return a.a.createElement("header",{className:"list-group-item-header border-top-0 border-left-0 border-right-0 d-flex justify-content-between text-dark text-center"},a.a.createElement("div",{style:{width:"4em"}},a.a.createElement(h.a,{icon:v.e,size:"lg"})),a.a.createElement("div",{style:{width:"4em"}},a.a.createElement(h.a,{icon:v.q,size:"lg"})),a.a.createElement("div",{style:{width:"4em"}},a.a.createElement(h.a,{icon:v.f,size:"lg"})),a.a.createElement("div",{style:{width:"1em"}}))},Te=function(){return a.a.createElement("header",{className:"list-group-item-header border-top-0 border-left-0 border-right-0 d-flex justify-content-between text-dark text-center"},a.a.createElement("div",{style:{width:"4em"}},a.a.createElement(h.a,{icon:v.d,size:"lg"})),a.a.createElement("div",{style:{width:"4em"}},a.a.createElement(h.a,{icon:v.f,size:"lg"})),a.a.createElement("div",{style:{width:"1em"}}))},Oe=function(e){var t=e.duration,n=e.rest,r=e.onContentChange;return a.a.createElement("div",{className:"d-flex justify-content-between p-3"},a.a.createElement("div",null,a.a.createElement(ve,{defaultValue:t,placeholder:"Duration",onChange:function(e){return r({duration:parseFloat(e.currentTarget.value)})}})),a.a.createElement("div",null,a.a.createElement(ve,{defaultValue:n,placeholder:"Rest",onChange:function(e){return r({rest:parseFloat(e.currentTarget.value)})}})),a.a.createElement(Ie,null))},ye=Object(he.SortableElement)(function(e){var t=e.type,n=e.step,r=n.done,c=Object(p.a)(n,["done"]),i=e.onSwipeLeft,s=e.onSwipeRight,o=e.leftSwipeElement,E=e.rightSwipeElement,u=e.onContentChange;return a.a.createElement(_,{className:"list-group-item p-0 "+(r?"list-group-item-success":""),onSwipeLeft:i,onSwipeRight:s,leftSwipeElement:o,rightSwipeElement:E},"timed"===t?a.a.createElement(Oe,{duration:c.duration,rest:c.rest,onContentChange:u}):a.a.createElement(Re,{kg:c.kg,repetition:c.repetition,rest:c.rest,onContentChange:u}))}),we=Object(he.SortableContainer)(function(e){var t=e.type,n=e.onSwipeLeft,r=e.onSwipeRight,c=e.leftSwipeElement,i=e.rightSwipeElement,s=e.steps,o=e.onUpdateStep;return a.a.createElement("ul",{className:"list-group list-group-flush"},s.map(function(e,s){return a.a.createElement(ye,{key:"item-".concat(e.id),index:s,type:t,step:e,onSwipeRight:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return r(e)}),onSwipeLeft:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return n(e)}),leftSwipeElement:c,rightSwipeElement:i,onContentChange:o(e.id)})}))}),je=function(e){function t(e){var n;Object(s.a)(this,t),n=Object(E.a)(this,Object(u.a)(t).call(this,e));var r=e.exercise.name;return n.state={name:r},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.name,t=this.props,n=t.onAddFirstStep,r=t.onDeleteStep,c=t.onAcknowledgeStep,i=t.onCancelStep,s=t.onUpdateStep,o=t.onMoveStep,E=t.onExerciseNameChange,u=t.exercise,l=u.type,d=u.steps;return a.a.createElement("article",{className:"card"},a.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},a.a.createElement("header",{className:"card-body"},a.a.createElement("label",{htmlFor:"exerciseName",className:"d-none"},"Exercise name"),a.a.createElement("input",{type:"text",className:"form-control font-weight-bold text-primary",id:"exerciseName",placeholder:"Your exercise name",defaultValue:e,onChange:function(e){return E(e.currentTarget.value)},autoComplete:"off",required:!0})),a.a.createElement(a.a.Fragment,null,l&&d&&d.length>0?a.a.createElement("section",null,"timed"===l?a.a.createElement(Te,null):a.a.createElement(ge,null),a.a.createElement(we,{type:l,steps:d.filter(function(e){return!e.done}),onSortEnd:function(e){var t=e.oldIndex,n=e.newIndex;return o({oldIndex:t,newIndex:n})},onSwipeLeft:function(e){return c(e.id)},onSwipeRight:function(e){return r(e.id)},leftSwipeElement:a.a.createElement(U,null),rightSwipeElement:a.a.createElement(k,null),onUpdateStep:s,lockAxis:"y",useDragHandle:!0,helperClass:"list-group-item-sortable-helper"}),a.a.createElement(we,{type:l,steps:d.filter(function(e){return e.done}),onSortEnd:function(e){var t=e.oldIndex,n=e.newIndex;return o({oldIndex:t,newIndex:n})},onSwipeLeft:function(e){return i(e.id)},onSwipeRight:function(e){return r(e.id)},leftSwipeElement:a.a.createElement(N,null),rightSwipeElement:a.a.createElement(k,null),onUpdateStep:s,lockAxis:"y",useDragHandle:!0,helperClass:"list-group-item-sortable-helper"})):a.a.createElement("section",{className:"card-body text-center"},a.a.createElement("p",{className:"card-text lead"},"Choose your exercise type:"),a.a.createElement("button",{type:"button",className:"btn btn-outline-primary m-1",onClick:function(){return n("timed")()}},a.a.createElement(h.a,{icon:v.o})," Time serie"),a.a.createElement("button",{type:"button",className:"btn btn-outline-primary m-1",onClick:function(){return n("repetition")()}},a.a.createElement(h.a,{icon:v.e})," Repetition serie")))))}}]),t}(r.Component),_e=function(){return a.a.createElement(y,{text:"Loading ...",icon:v.p,action:a.a.createElement("div",null,"Your exercise is being loaded")})},Ue=function(){return a.a.createElement(y,{text:"Error loading your exercise",icon:v.j,action:a.a.createElement("div",null,"Sorry an error occured loading your exercice !")})},ke=function(){return a.a.createElement(y,{text:"Exercise not found",icon:v.k,action:a.a.createElement(C.a,{className:"btn btn-primary",to:"/"},"Back to exercises")})},Ne=function(e){var t=e.filter(function(e){return!e.done});return t.length>0?t[0].id:e.length>0?e[0].id:void 0},Ae=function(e){var t=e.loading,n=void 0!==t&&t,r=e.errorLoading,c=void 0!==r&&r,i=e.exercise,s=e.onAddStep,o=e.onDeleteStep,E=e.onAcknowledgeStep,u=e.onCancelStep,l=(e.onStartExercise,e.onUpdateStep),d=e.onMoveStep,p=e.onExerciseNameChange,m=a.a.createElement(C.a,{to:"/",className:"btn btn-link text-dark","aria-label":"Back to exercises list"},a.a.createElement(h.a,{icon:v.q})),S=[n||c||!i||0===i.steps.length?a.a.createElement("button",{key:"nav-start",className:"btn btn-link nav-link btn-block",disabled:!0},a.a.createElement(h.a,{icon:v.h})," Start"):a.a.createElement(C.a,{to:"/".concat(i.id,"/runner/").concat(Ne(i.steps)),key:"nav-start",className:"btn btn-link nav-link btn-block"},a.a.createElement(h.a,{icon:v.h})," Start")];return i&&i.type&&(S=[].concat(Object(Ce.a)(S),[a.a.createElement("button",{key:"nav-new-step",className:"btn btn-link nav-link btn-block",disabled:n||c,onClick:function(){return s(i.id)(i.type)(i.steps[i.steps.length-1])}},a.a.createElement(h.a,{icon:v.i})," New step")])),a.a.createElement(T,{header:m,navItems:S},n?a.a.createElement(_e,null):c?a.a.createElement(Ue,null):i?a.a.createElement(je,{exercise:i,onAddFirstStep:s(i.id),onDeleteStep:o(i.id),onAcknowledgeStep:E(i.id),onCancelStep:u(i.id),onUpdateStep:l(i.id),onMoveStep:d(i.id),onExerciseNameChange:p(i.id),onStartExercise:function(){}}):a.a.createElement(ke,null))},Xe=function(e){function t(){return Object(s.a)(this,t),Object(E.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.exercise||this.props.load()}},{key:"render",value:function(){var e=this.props,t=(e.load,Object(p.a)(e,["load"]));return a.a.createElement(Ae,t)}}]),t}(r.Component),De=Object(m.b)(function(e,t){return{exercise:f(e)(t.exerciseId),loading:x(e),errorLoading:b(e)}},function(e){return{load:function(){return e(M())},onAddStep:function(t){return function(n){return function(r){return e(function(e,t,n){var r=ue(t,n);return{type:Q.ADD_EXERCISE_STEP.REQUEST,exerciseId:e,stepType:t,step:r}}(t,n,r))}}},onDeleteStep:function(t){return function(n){return e(function(e,t){return{type:Q.DELETE_EXERCISE_STEP.REQUEST,exerciseId:e,stepId:t}}(t,n))}},onAcknowledgeStep:function(t){return function(n){return e(re(t,n))}},onCancelStep:function(t){return function(n){return e(function(e,t){return{type:Q.CANCEL_EXERCISE_STEP.REQUEST,exerciseId:e,stepId:t}}(t,n))}},onUpdateStep:function(t){return function(n){return function(r){return e(function(e,t,n){return{type:Q.UPDATE_EXERCISE_STEP.REQUEST,exerciseId:e,stepId:t,contentPatch:n}}(t,n,r))}}},onMoveStep:function(t){return function(n){var r=n.oldIndex,a=n.newIndex;return e(function(e,t,n){return{type:Q.MOVE_EXERCISE_STEP.REQUEST,exerciseId:e,oldIndex:t,newIndex:n}}(t,r,a))}},onStartExercise:function(){},onExerciseNameChange:function(t){return function(n){return e(function(e,t){return{type:Q.UPDATE_EXERCISE_NAME.REQUEST,id:e,name:t}}(t,n))}}}})(Xe),Le=n(24),Pe=n(91),Fe=n(92),Qe=(n(239),n(41)),Me=n(19),Ge={loading:!1,error:null,ids:[],byId:{}},He=function(e,t){var n=e.ids.filter(function(e){return e!==t}),r=n.reduce(function(t,n){return Object(L.a)({},t,Object(Me.a)({},n,e.byId[n]))},{});return Object(L.a)({},e,{ids:n,byId:r})},We=Object(Le.combineReducers)({exercises:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q.FETCH_EXERCISES.REQUEST:case Q.FETCH_EXERCISE.REQUEST:return Object(L.a)({},e,{loading:!0,error:null});case Q.FETCH_EXERCISES.SUCCESS:return Object(L.a)({},e,{loading:!1,ids:t.exercises.map(function(e){return e.id}),byId:t.exercises.reduce(function(e,t){return Object(L.a)({},e,Object(Me.a)({},t.id,t))},{})});case Q.FETCH_EXERCISES.FAILURE:case Q.FETCH_EXERCISE.FAILURE:return Object(L.a)({},e,{loading:!1,error:t.error});case Q.ADD_EXERCISE.SUCCESS:case Q.FETCH_EXERCISE.SUCCESS:return Object(L.a)({},e,{loading:!1,ids:[].concat(Object(Ce.a)(e.ids),[t.exercise.id]),byId:Object(L.a)({},e.byId,Object(Me.a)({},t.exercise.id,t.exercise))});case Q.DELETE_EXERCISE.SUCCESS:return He(e,t.id);case Q.ACKNOWLEDGE_EXERCISE.SUCCESS:case Q.CANCEL_EXERCISE.SUCCESS:case Q.ACKNOWLEDGE_EXERCISE_STEP.SUCCESS:case Q.CANCEL_EXERCISE_STEP.SUCCESS:case Q.UPDATE_EXERCISE_NAME.SUCCESS:case Q.ADD_EXERCISE_STEP.SUCCESS:case Q.DELETE_EXERCISE_STEP.SUCCESS:case Q.UPDATE_EXERCISE_STEP.SUCCESS:case Q.MOVE_EXERCISE_STEP.SUCCESS:return Object(L.a)({},e,{byId:Object(L.a)({},e.byId,Object(Me.a)({},t.exercise.id,Object(L.a)({},t.exercise)))});case Q.START_EXERCISE:return e.byId[t.exercise.id]?Object(L.a)({},e,{byId:Object(L.a)({},e.byId,Object(Me.a)({},t.exercise.id,Object(L.a)({},e.byId[t.exercise.id],{progress:Object(L.a)({},e.byId[t.exercise.id].progress,{status:"running",startedAt:new Date})})))}):e;case Q.STOP_EXERCISE:return e.byId[t.exercise.id]?Object(L.a)({},e,{byId:Object(L.a)({},e.byId,Object(Me.a)({},t.exercise.id,Object(L.a)({},e.byId[t.exercise.id],{progress:Object(L.a)({},e.byId[t.exercise.id].progress,{status:"stopped",stoppedAt:new Date})})))}):e;case Q.PAUSE_EXERCISE:return e.byId[t.exercise.id]?Object(L.a)({},e,{byId:Object(L.a)({},e.byId,Object(Me.a)({},t.exercise.id,Object(L.a)({},e.byId[t.exercise.id],{progress:Object(L.a)({},e.byId[t.exercise.id].progress,{status:"paused",pausedAt:new Date})})))}):e;default:return e}}}),Ke=n(4),Ve=n.n(Ke),Be=n(3),qe=n(32),ze=n(93),Ye="readwrite",Je=n.n(ze).a.open("oeuf-db",1,function(e){switch(e.oldVersion){case 0:default:e.createObjectStore("exercise",{keyPath:"id"})}}),$e=function(){var e=Object(qe.a)(Ve.a.mark(function e(t){var n,r;return Ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je;case 2:return n=e.sent,(r=n.transaction("exercise",Ye)).objectStore("exercise").put(t),e.next=7,r.complete;case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Ze=function(){var e=Object(qe.a)(Ve.a.mark(function e(t,n){var r,a,c,i,s;return Ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je;case 2:return r=e.sent,a=r.transaction("exercise",Ye),c=a.objectStore("exercise"),e.next=7,c.get(t);case 7:if(!(i=e.sent)){e.next=16;break}return s=Object(L.a)({},i,n),c.put(s),e.next=13,a.complete;case 13:return e.abrupt("return",s);case 16:throw new Error('Exercise not found (id="'.concat(t,'"")'));case 17:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),et=function(){var e=Object(qe.a)(Ve.a.mark(function e(t){var n,r;return Ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je;case 2:return n=e.sent,(r=n.transaction("exercise",Ye)).objectStore("exercise").delete(t),e.abrupt("return",r.complete);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),tt=function(){var e=Object(qe.a)(Ve.a.mark(function e(){var t;return Ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je;case 2:return t=e.sent,e.abrupt("return",t.transaction("exercise").objectStore("exercise").getAll());case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),nt=function(){var e=Object(qe.a)(Ve.a.mark(function e(t){var n;return Ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je;case 2:return n=e.sent,e.abrupt("return",n.transaction("exercise").objectStore("exercise").get(t));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),rt=Ve.a.mark(_t),at=Ve.a.mark(Ut),ct=Ve.a.mark(kt),it=Ve.a.mark(Nt),st=Ve.a.mark(At),ot=Ve.a.mark(Xt),Et=Ve.a.mark(Dt),ut=Ve.a.mark(Lt),lt=Ve.a.mark(Pt),dt=Ve.a.mark(Ft),pt=Ve.a.mark(Qt),mt=Ve.a.mark(Mt),St=Ve.a.mark(Gt),ft=Ve.a.mark(Ht),xt=Ve.a.mark(Wt),bt=Ve.a.mark(Kt),Ct=Ve.a.mark(Vt),ht=Ve.a.mark(Bt),It=Ve.a.mark(qt),vt=Ve.a.mark(zt),Rt=Ve.a.mark(Yt),gt=Ve.a.mark(Jt),Tt=Ve.a.mark($t),Ot=Ve.a.mark(Zt),yt=Ve.a.mark(en),wt=Ve.a.mark(tn),jt=Ve.a.mark(nn);function _t(){var e;return Ve.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(Be.b)(tt);case 3:return e=t.sent,t.next=6,Object(Be.c)(G(e));case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,Object(Be.c)(H(t.t0));case 12:case"end":return t.stop()}},rt,this,[[0,8]])}function Ut(){return Ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Be.e)(Q.FETCH_EXERCISES.REQUEST,_t);case 2:case"end":return e.stop()}},at,this)}function kt(e){var t,n;return Ve.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.id,r.prev=1,r.next=4,Object(Be.b)(nt,t);case 4:return n=r.sent,r.next=7,Object(Be.c)(W(n));case 7:r.next=13;break;case 9:return r.prev=9,r.t0=r.catch(1),r.next=13,Object(Be.c)(K(t,r.t0));case 13:case"end":return r.stop()}},ct,this,[[1,9]])}function Nt(){return Ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Be.e)(Q.FETCH_EXERCISE.REQUEST,kt);case 2:case"end":return e.stop()}},it,this)}function At(e){var t,n;return Ve.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.exercise,r.prev=1,r.next=4,Object(Be.b)($e,t);case 4:return n=r.sent,r.next=7,Object(Be.c)(V(n));case 7:r.next=13;break;case 9:return r.prev=9,r.t0=r.catch(1),r.next=13,Object(Be.c)(B(t,r.t0));case 13:case"end":return r.stop()}},st,this,[[1,9]])}function Xt(){return Ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Be.d)(Q.ADD_EXERCISE.REQUEST,At);case 2:case"end":return e.stop()}},ot,this)}function Dt(e){var t;return Ve.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.id,n.prev=1,n.next=4,Object(Be.b)(et,t);case 4:return n.next=6,Object(Be.c)(q(t));case 6:n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(1),n.next=12,Object(Be.c)(z(t,n.t0));case 12:case"end":return n.stop()}},Et,this,[[1,8]])}function Lt(){return Ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Be.d)(Q.DELETE_EXERCISE.REQUEST,Dt);case 2:case"end":return e.stop()}},ut,this)}function Pt(e){var t,n,r;return Ve.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.id,a.prev=1,a.next=4,Object(Be.b)(nt,t);case 4:return n=a.sent,a.next=7,Object(Be.b)($e,Object(L.a)({},n,{done:!0,steps:n.steps.map(function(e){return Object(L.a)({},e,{done:!0})})}));case 7:return r=a.sent,a.next=10,Object(Be.c)(J(r));case 10:a.next=16;break;case 12:return a.prev=12,a.t0=a.catch(1),a.next=16,Object(Be.c)($(t,a.t0));case 16:case"end":return a.stop()}},lt,this,[[1,12]])}function Ft(){return Ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Be.d)(Q.ACKNOWLEDGE_EXERCISE.REQUEST,Pt);case 2:case"end":return e.stop()}},dt,this)}function Qt(e){var t,n,r;return Ve.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.id,a.prev=1,a.next=4,Object(Be.b)(nt,t);case 4:return n=a.sent,a.next=7,Object(Be.b)($e,Object(L.a)({},n,{done:!1,steps:n.steps.map(function(e){return Object(L.a)({},e,{done:!1})})}));case 7:return r=a.sent,a.next=10,Object(Be.c)(Z(r));case 10:a.next=16;break;case 12:return a.prev=12,a.t0=a.catch(1),a.next=16,Object(Be.c)(ee(t,a.t0));case 16:case"end":return a.stop()}},pt,this,[[1,12]])}function Mt(){return Ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Be.d)(Q.CANCEL_EXERCISE.REQUEST,Qt);case 2:case"end":return e.stop()}},mt,this)}function Gt(e){var t,n,r;return Ve.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.id,n=e.name,a.next=3,Object(Be.b)(Qe.b,500);case 3:return a.prev=3,a.next=6,Object(Be.b)(Ze,t,{name:n});case 6:return r=a.sent,a.next=9,Object(Be.c)(te(r));case 9:a.next=15;break;case 11:return a.prev=11,a.t0=a.catch(3),a.next=15,Object(Be.c)(ne(t,a.t0));case 15:case"end":return a.stop()}},St,this,[[3,11]])}function Ht(){return Ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Be.e)(Q.UPDATE_EXERCISE_NAME.REQUEST,Gt);case 2:case"end":return e.stop()}},ft,this)}function Wt(e){var t,n,r,a,c;return Ve.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.exerciseId,n=e.stepType,r=e.step,i.prev=1,i.next=4,Object(Be.b)(nt,t);case 4:return a=i.sent,i.next=7,Object(Be.b)($e,Object(L.a)({},a,{type:n,steps:[].concat(Object(Ce.a)(a.steps),[r])}));case 7:return c=i.sent,i.next=10,Object(Be.c)(oe(c));case 10:i.next=16;break;case 12:return i.prev=12,i.t0=i.catch(1),i.next=16,Object(Be.c)(Ee(t,i.t0));case 16:case"end":return i.stop()}},xt,this,[[1,12]])}function Kt(){return Ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Be.e)(Q.ADD_EXERCISE_STEP.REQUEST,Wt);case 2:case"end":return e.stop()}},bt,this)}function Vt(e){var t,n,r,a;return Ve.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.exerciseId,n=e.stepId,c.prev=1,c.next=4,Object(Be.b)(nt,t);case 4:return r=c.sent,c.next=7,Object(Be.b)($e,Object(L.a)({},r,{steps:Object(Ce.a)(r.steps.filter(function(e){return e.id!==n}))}));case 7:return a=c.sent,c.next=10,Object(Be.c)(le(a));case 10:c.next=16;break;case 12:return c.prev=12,c.t0=c.catch(1),c.next=16,Object(Be.c)(de(t,n,c.t0));case 16:case"end":return c.stop()}},Ct,this,[[1,12]])}function Bt(){return Ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Be.d)(Q.DELETE_EXERCISE_STEP.REQUEST,Vt);case 2:case"end":return e.stop()}},ht,this)}function qt(e){var t,n,r,a,c;return Ve.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.exerciseId,n=e.stepId,i.prev=1,i.next=4,Object(Be.b)(nt,t);case 4:return r=i.sent,(a=Object(Ce.a)(r.steps)).find(function(e){return e.id===n}).done=!0,i.next=9,Object(Be.b)($e,Object(L.a)({},r,{steps:a}));case 9:return c=i.sent,i.next=12,Object(Be.c)(ae(c));case 12:if(!c.steps.every(function(e){return e.done})){i.next=15;break}return i.next=15,Object(Be.c)(Y(c.id));case 15:i.next=21;break;case 17:return i.prev=17,i.t0=i.catch(1),i.next=21,Object(Be.c)(ce(t,n,i.t0));case 21:case"end":return i.stop()}},It,this,[[1,17]])}function zt(){return Ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Be.d)(Q.ACKNOWLEDGE_EXERCISE_STEP.REQUEST,qt);case 2:case"end":return e.stop()}},vt,this)}function Yt(e){var t,n,r,a,c;return Ve.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.exerciseId,n=e.stepId,i.prev=1,i.next=4,Object(Be.b)(nt,t);case 4:return r=i.sent,(a=Object(Ce.a)(r.steps)).find(function(e){return e.id===n}).done=!1,i.next=9,Object(Be.b)($e,Object(L.a)({},r,{done:!1,steps:a}));case 9:return c=i.sent,i.next=12,Object(Be.c)(ie(c));case 12:i.next=18;break;case 14:return i.prev=14,i.t0=i.catch(1),i.next=18,Object(Be.c)(se(t,n,i.t0));case 18:case"end":return i.stop()}},Rt,this,[[1,14]])}function Jt(){return Ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Be.d)(Q.CANCEL_EXERCISE_STEP.REQUEST,Yt);case 2:case"end":return e.stop()}},gt,this)}function $t(e){var t,n,r,a,c,i;return Ve.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.exerciseId,n=e.oldIndex,r=e.newIndex,s.prev=1,s.next=4,Object(Be.b)(nt,t);case 4:return a=s.sent,c=Object(he.arrayMove)(Object(Ce.a)(a.steps),n,r),s.next=8,Object(Be.b)($e,Object(L.a)({},a,{done:!1,steps:c}));case 8:return i=s.sent,s.next=11,Object(Be.c)(Se(i));case 11:s.next=17;break;case 13:return s.prev=13,s.t0=s.catch(1),s.next=17,Object(Be.c)(fe(t,n,r,s.t0));case 17:case"end":return s.stop()}},Tt,this,[[1,13]])}function Zt(){return Ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Be.d)(Q.MOVE_EXERCISE_STEP.REQUEST,$t);case 2:case"end":return e.stop()}},Ot,this)}function en(e){var t,n,r,a,c,i,s;return Ve.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.exerciseId,n=e.stepId,r=e.contentPatch,o.next=3,Object(Be.b)(Qe.b,500);case 3:return o.prev=3,o.next=6,Object(Be.b)(nt,t);case 6:return a=o.sent,c=Object(Ce.a)(a.steps),i=c.findIndex(function(e){return e.id===n}),c[i]=Object(L.a)({},c[i],r),o.next=12,Object(Be.b)($e,Object(L.a)({},a,{done:!1,steps:c}));case 12:return s=o.sent,o.next=15,Object(Be.c)(pe(s));case 15:o.next=21;break;case 17:return o.prev=17,o.t0=o.catch(3),o.next=21,Object(Be.c)(me(t,n,r,o.t0));case 21:case"end":return o.stop()}},yt,this,[[3,17]])}function tn(){return Ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Be.e)(Q.UPDATE_EXERCISE_STEP.REQUEST,en);case 2:case"end":return e.stop()}},wt,this)}function nn(){return Ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Be.a)([Ut(),Nt(),Xt(),Lt(),Ft(),Mt(),Ht(),Kt(),Bt(),zt(),Jt(),Zt(),tn()]);case 2:case"end":return e.stop()}},jt,this)}var rn=Object(Qe.a)(),an=[Fe.a,rn];var cn=function(e){var t=Object(Le.createStore)(We,e,Object(Pe.composeWithDevTools)(Le.applyMiddleware.apply(void 0,an)));return rn.run(nn),t}(),sn=function(e){var t=e.children,n=e.store;return a.a.createElement(m.a,{store:n||cn},t)},on=n(250),En=n(252),un=n(251),ln=function(e){var t=e.history,n=a.a.createElement("button",{className:"btn btn-primary",onClick:function(){return t.goBack()}},"Go back");return a.a.createElement(y,{icon:v.g,text:"Sorry, page was not found",action:n})},dn=(n(242),n(244),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(E.a)(this,Object(u.a)(t).call(this,e))).intervalId=void 0,n.timeoutId=void 0,n.clearTimers=function(){n.intervalId&&clearInterval(n.intervalId),n.intervalId=void 0,n.timeoutId&&clearTimeout(n.timeoutId),n.timeoutId=void 0},n.startTimers=function(){n.tick(),n.clearTimers(),n.intervalId=window.setInterval(n.tick,n.props.tick_ms),n.timeoutId=window.setTimeout(n.finish,1e3*n.state.remainingTime)},n.start=function(){"RUNNING"!==n.state.status&&n.state.remainingTime>0&&n.setState({status:"RUNNING"},function(){n.startTimers()})},n.stop=function(){n.clearTimers(),n.setState({status:"STOPPED"})},n.finish=function(){n.clearTimers(),n.setState({status:"FINISHED",remainingTime:0}),n.props.onFinished()},n.reset=function(){n.setState({remainingTime:n.props.totalTime},function(){"RUNNING"===n.state.status&&n.startTimers()})},n.tick=function(){n.setState(function(e){var t=e.remainingTime-n.props.tick_ms/1e3;return t>=0?{remainingTime:t}:{remainingTime:0}})},n.onTapTimer=function(){return"RUNNING"===n.state.status?n.stop():n.start()},n.getStrokeDashoffset=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*(180*Math.PI)},n.state={remainingTime:n.props.totalTime,status:"STOPPED"},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){"rest"===this.props.theme&&this.start()}},{key:"componentWillUnmount",value:function(){this.clearTimers()}},{key:"render",value:function(){var e=this.state,t=e.status,n=e.remainingTime;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,t),a.a.createElement("div",{className:g()("timer-container",{rest:"rest"===this.props.theme}),onClick:this.onTapTimer},a.a.createElement("svg",{className:"timer-svg m-auto d-flex",width:"200",height:"200",version:"1.1",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(-90)"},a.a.createElement("filter",{xmlns:"http://www.w3.org/2000/svg",id:"dropshadow",height:"130%"},a.a.createElement("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"3"}),a.a.createElement("feOffset",{dx:"2",dy:"2",result:"offsetblur"}),a.a.createElement("feComponentTransfer",null,a.a.createElement("feFuncA",{type:"linear",slope:"0.2"})),a.a.createElement("feMerge",null,a.a.createElement("feMergeNode",null),a.a.createElement("feMergeNode",{in:"SourceGraphic"}))),a.a.createElement("circle",{className:"progress-bar",filter:"url(#dropshadow)",r:"90",cx:"100",cy:"100",fill:"transparent",strokeDasharray:"565.48",strokeDashoffset:"0"}),a.a.createElement("circle",{className:"bar",r:"90",cx:"100",cy:"100",fill:"transparent",strokeDasharray:"565.48",strokeDashoffset:this.getStrokeDashoffset(n/this.props.totalTime),style:"RUNNING"===t?{transition:"stroke-dashoffset ".concat(this.props.tick_ms/1e3,"s linear")}:{}})),a.a.createElement("div",{className:"timer-info d-flex"},a.a.createElement("div",{className:"m-auto display-2"},Math.ceil(n)))),a.a.createElement("div",{className:"my-2"},a.a.createElement("button",{className:"btn btn-block btn-link m-1",onClick:this.reset},a.a.createElement(h.a,{flip:"horizontal",icon:v.l})," Reset")))}}]),t}(r.PureComponent));dn.defaultProps={tick_ms:1e3,theme:"exercise",onFinished:function(){}};var pn=function(e){e.onFinished;var t=e.kg,n=e.repetition;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"d-flex justify-content-around align-items-center"},a.a.createElement(h.a,{className:"m-2 display-3",icon:v.e,"aria-label":"weight in kg"}),a.a.createElement("span",{className:"m-2 text-primary display-2"},t)),a.a.createElement("div",{className:"d-flex justify-content-around align-items-center"},a.a.createElement(h.a,{className:"m-2 display-2",icon:v.q,"aria-label":"repetition"}),a.a.createElement("span",{className:"m-2 text-primary display-3"},n)))},mn=n(253),Sn=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(E.a)(this,Object(u.a)(t).call(this,e))).goToNextStep=function(){return n.setState({renderNext:!0})},n.finishStepAndRest=function(){n.setState({rest:!0}),n.props.onStepFinished(n.props.steps[n.props.currentStepIndex].id)},n.renderProgress=function(e){var t=n.props.type;if("timed"===t){var r=e;return a.a.createElement(dn,{totalTime:r.duration,onFinished:n.finishStepAndRest})}if("repetition"===t){var c=e;return a.a.createElement(pn,{repetition:c.repetition,kg:c.kg,onFinished:n.finishStepAndRest})}return"Error displaying progress of the exercise, unknown type"},n.state={rest:!1,renderNext:!1},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.exerciseId,n=e.exerciseName,r=e.steps,c=e.currentStepIndex;return a.a.createElement(T,{header:a.a.createElement(a.a.Fragment,null,a.a.createElement(C.a,{to:"/".concat(t),className:"btn btn-link text-dark","aria-label":"Back to exercises list"},a.a.createElement(h.a,{icon:v.q})),"".concat(n," - Step ").concat(c+1)),navItems:[a.a.createElement(a.a.Fragment,null,c>0?a.a.createElement(C.a,{to:"/".concat(t,"/runner/").concat(r[c-1].id),key:"nav-previous",className:"btn btn-link nav-link btn-block"},a.a.createElement(h.a,{icon:v.m})," Previous"):a.a.createElement("button",{key:"nav-previous",className:"btn btn-link nav-link btn-block",disabled:!0},a.a.createElement(h.a,{icon:v.m})," Previous")),a.a.createElement(a.a.Fragment,null,c<r.length-1?a.a.createElement(C.a,{to:"/".concat(t,"/runner/").concat(r[c+1].id),key:"nav-next",className:"btn btn-link nav-link btn-block"},a.a.createElement(h.a,{icon:v.n})," Next"):a.a.createElement("button",{key:"nav-next",className:"btn btn-link nav-link btn-block",disabled:!0},a.a.createElement(h.a,{icon:v.n})," Next"))]},a.a.createElement(O,{className:g()({success:r[c].done})},this.state.rest?a.a.createElement(dn,{key:"rest-timed-progress",totalTime:r[c].rest,theme:"rest",onFinished:this.goToNextStep}):a.a.createElement(a.a.Fragment,null,this.renderProgress(r[c]),a.a.createElement("div",{className:"d-flex"},a.a.createElement("button",{className:"btn btn-outline-info btn-block m-1",onClick:this.finishStepAndRest},a.a.createElement(h.a,{icon:I.b})," Rest")))),this.state.renderNext&&c<r.length-1&&a.a.createElement(mn.a,{to:"/".concat(t,"/runner/").concat(r[c+1].id)}))}}]),t}(r.PureComponent);Sn.defaultProps={currentStepIndex:0};var fn=function(){return a.a.createElement(y,{text:"Loading ...",icon:v.p,action:a.a.createElement("p",null,"Your exercise is being loaded")})},xn=function(){return a.a.createElement(y,{text:"Error loading your exercise",icon:v.j,action:a.a.createElement("p",null,"Sorry an error occured loading your exercice !")})},bn=function(){return a.a.createElement(y,{text:"Exercise not found",icon:v.k,action:a.a.createElement(C.a,{className:"btn btn-primary",to:"/"},"Back to exercises")})},Cn=function(){return a.a.createElement(y,{text:"Step not found",icon:v.k,action:a.a.createElement(C.a,{className:"btn btn-primary",to:"/"},"Back to exercises")})},hn=function(e){function t(){return Object(s.a)(this,t),Object(E.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.exercise||this.props.loadExercise()}},{key:"render",value:function(){var e=this.props,t=e.stepId,n=e.exercise,r=e.onStepFinished,c=e.loading,i=e.errorLoading,s=n?n.steps.findIndex(function(e){return e.id===t}):-1;return c?a.a.createElement(fn,null):i?a.a.createElement(xn,null):n?s<0?a.a.createElement(Cn,null):a.a.createElement(Sn,{key:"exercise-runner-".concat(n.id,"-").concat(t),exerciseId:n.id,exerciseName:n.name,type:n.type,steps:n.steps,onStepFinished:r,currentStepIndex:s}):a.a.createElement(bn,null)}}]),t}(r.PureComponent),In=Object(m.b)(function(e,t){return{exercise:f(e)(t.exerciseId),loading:x(e),errorLoading:b(e)}},function(e,t){return{loadExercise:function(){return e((n=t.exerciseId,{type:Q.FETCH_EXERCISE.REQUEST,id:n}));var n},onStepFinished:function(){return e(re(t.exerciseId,t.stepId))}}})(hn),vn=function(e){function t(){return Object(s.a)(this,t),Object(E.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return a.a.createElement(sn,null,a.a.createElement(on.a,{basename:"/oeuf"},a.a.createElement(d,null,a.a.createElement(En.a,null,a.a.createElement(un.a,{exact:!0,path:"/",component:be}),a.a.createElement(un.a,{exact:!0,path:"/:id",component:function(e){var t=e.match;return a.a.createElement(De,{exerciseId:t.params.id})}}),a.a.createElement(un.a,{exact:!0,path:"/:exerciseId/runner/:stepId",component:function(e){var t=e.match;return a.a.createElement(In,{exerciseId:t.params.exerciseId,stepId:t.params.stepId})}}),a.a.createElement(un.a,{component:ln})))))}}]),t}(r.Component),Rn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function gn(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(a.a.createElement(vn,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/oeuf",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/oeuf","/service-worker.js");Rn?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):gn(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):gn(e)})}}()},94:function(e,t,n){e.exports=n(247)},99:function(e,t,n){}},[[94,2,1]]]);
//# sourceMappingURL=main.059ac6ad.chunk.js.map