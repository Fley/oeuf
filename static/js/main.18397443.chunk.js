(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,n){},102:function(e,t,n){},108:function(e,t,n){},132:function(e,t,n){},245:function(e,t,n){},247:function(e,t,n){},250:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(41),i=n.n(c),s=n(13),o=n(14),E=n(16),u=n(15),l=n(17),d=(n(100),n(102),function(e){var t=e.children;return a.a.Children.only(t),a.a.createElement(a.a.Fragment,null,t)}),p=n(31),m=n(20),f=function(e){return C(e).ids.map(function(t){return C(e).byId[t]})},S=function(e){return function(t){return C(e).byId[t]}},x=function(e){return C(e).loading},b=function(e){return!!C(e).error},C=function(e){return e.exercises},h=function(e){return e.notification},I=n(252),v=n(8),R=n(51),O=n(6),g=n(19),T=n.n(g),y=(n(108),function(e){var t=e.message,n=e.type,r=void 0===n?"default":n,c=e.actions,i=void 0===c?[]:c,s=e.hidden,o=void 0!==s&&s,E=e.onClick,u=e.onMouseEnter,l=e.onMouseLeave;return a.a.createElement("div",{className:"toast-container",onClick:E,onMouseEnter:u,onMouseLeave:l},a.a.createElement("div",{className:T()("toast","shadow-up-sm","toast-".concat(r),{"toast-hidden":o,"toast-visible":!o})},a.a.createElement("div",null,t),i&&a.a.createElement("div",{className:"toast-actions"},i.map(function(e,t){return a.a.createElement("span",{key:"action-".concat(t)},e)}))))}),j=function(e){return e.notification},w="NOTIFICATION_PUSH",_=function(e){return{type:w,notification:e}},k="NOTIFICATION_PAUSE_AUTO_HIDE",N="NOTIFICATION_RESUME_AUTO_HIDE",U=function(e){return{type:"NOTIFICATION_SHOW",notification:e}},A="NOTIFICATION_HIDE",L=function(){return{type:A}},D=Object(m.b)(function(e){return{notification:j(h(e))}},function(e){return{onClick:function(){return e(L())},onMouseEnter:function(){return e({type:k})},onMouseLeave:function(){return e({type:N})}}})(function(e){var t=e.notification,n=e.onClick,r=e.onMouseEnter,c=e.onMouseLeave;return a.a.createElement(a.a.Fragment,null,t&&a.a.createElement(y,{message:t.message,type:t.type,onClick:n,onMouseEnter:r,onMouseLeave:c}))}),X=n(4),F=n.n(X),P=n(3),Q=n(30),M=F.a.mark(K),H=F.a.mark(W),G=5e3;function K(){var e,t,n;return F.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(P.a)(w);case 2:e=r.sent;case 3:return r.next=6,Object(P.f)(e);case 6:return t=r.sent,n=t.notification,r.next=10,Object(P.c)(W,n);case 10:r.next=3;break;case 12:case"end":return r.stop()}},M,this)}function W(e){var t,n,r;return F.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!e){a.next=3;break}return a.next=3,Object(P.d)(U(e));case 3:t=!0;case 4:if(!t){a.next=21;break}return a.next=7,Object(P.e)({hide:Object(P.f)(A),stopped:Object(P.f)(k),timeout:Object(P.c)(Q.b,G)});case 7:if(n=a.sent,r=n.stopped,!n.timeout){a.next=16;break}return a.next=13,Object(P.d)(L());case 13:t=!1,a.next=19;break;case 16:if(!r){a.next=19;break}return a.next=19,Object(P.f)(N);case 19:a.next=4;break;case 21:case"end":return a.stop()}},H,this)}var V=n(7),B={notification:void 0},q=function(e){var t=e.header,n=e.children,r=e.navItems,c=void 0===r?[]:r,i=e.headerBackground,s=void 0===i?{className:"bg-white",isLight:!0}:i;return a.a.createElement(a.a.Fragment,null,a.a.createElement("header",{className:T()("navbar justify-content-start sticky-top shadow-sm",s.className,{"navbar-light":s.isLight,"navbar-dark":!s.isLight})},t),a.a.createElement("main",{className:"col-sm-10 mx-auto mb-5 py-3 px-0 px-xs-2"},n),a.a.createElement("footer",{className:"fixed-bottom "},a.a.createElement(D,null),a.a.createElement("nav",{className:"navbar navbar-light bg-white p-0 navbar-expand shadow-up-sm"},a.a.createElement("ul",{className:"navbar-nav nav-justified w-100"},c.map(function(e,t){return a.a.createElement("li",{key:"nav-item-".concat(t),className:"nav-item"},e)})))))},z=function(e){var t=e.children,n=e.className;return a.a.createElement("div",{className:T()("d-flex align-items-center w-100 text-center bg-light text-dark",n),style:{height:"100vh",position:"fixed",top:0,left:0}},a.a.createElement("section",{className:"m-auto"},t))},Y=function(e){var t=e.icon,n=e.text,r=e.action;return a.a.createElement(z,null,a.a.createElement("div",null,t&&a.a.createElement(v.a,{icon:t,size:"7x"})),a.a.createElement("div",null,n),r&&a.a.createElement("nav",{className:"m-5"},r))},J=n(91),$=n.n(J),Z=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(E.a)(this,Object(u.a)(t).call(this,e))).onChangeIndex=function(e){n.setState({index:e})},n.onTransitionEnd=function(){0===n.state.index?n.props.onSwipeLeft():2===n.state.index&&n.props.onSwipeRight()},n.state={index:1},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,r=e.rightSwipeElement,c=e.leftSwipeElement;return a.a.createElement("li",{className:t},a.a.createElement($.a,{index:this.state.index,onTransitionEnd:this.onTransitionEnd,onChangeIndex:this.onChangeIndex},c,n,r))}}]),t}(r.Component),ee=function(){return a.a.createElement("div",{className:"d-flex bg-success text-white py-3 px-3 h-100 justify-content-end"},a.a.createElement(v.a,{icon:O.c,className:"align-self-center"}))},te=function(){return a.a.createElement("div",{className:"bg-danger text-white py-3 px-3 h-100"},a.a.createElement(v.a,{icon:O.q,className:"align-self-center"}))},ne=function(){return a.a.createElement("div",{className:"d-flex bg-warning text-white py-3 px-3 h-100 justify-content-end"},a.a.createElement(v.a,{icon:O.s,className:"align-self-center"}))},re=(n(132),function(e,t){return function(n){var r=n.id,c=n.name,i=n.done;return a.a.createElement(Z,{key:"exercise-".concat(r),className:"list-group-item p-0 "+(i?"list-group-item-success":""),onSwipeLeft:function(){return e(r)},onSwipeRight:function(){return t(r)},leftSwipeElement:i?a.a.createElement(ne,null):a.a.createElement(ee,null),rightSwipeElement:a.a.createElement(te,null)},a.a.createElement(I.a,{to:"/".concat(r),className:"d-flex py-3 px-3 list-group-item-action ".concat(i?"list-group-item-success":""," h-100")},a.a.createElement("span",{className:"flex-grow-1 p-1"},c),a.a.createElement("div",{className:"d-none d-sm-block btn-toolbar list-toolbar-hover",role:"toolbar","aria-label":"Toolbar with actions on the exercise"},a.a.createElement("button",{type:"button",className:"btn btn-outline-dark rounded-circle border-0 mx-1","aria-label":"Delete",onClick:function(e){t(r),e.preventDefault()}},a.a.createElement(v.a,{icon:O.r})),a.a.createElement("button",{type:"button",className:"btn btn-outline-dark rounded-circle border-0 mx-1","aria-label":"Complete",onClick:function(t){e(r),t.preventDefault()}},i?a.a.createElement(v.a,{icon:O.s}):a.a.createElement(v.a,{icon:O.c}))),a.a.createElement("span",{className:"p-1 ml-1"},a.a.createElement(v.a,{icon:O.a}))))}}),ae=function(e){var t=e.exercises,n=void 0===t?[]:t,r=e.onAddExercise,c=e.onAcknowledgeExercise,i=e.onDeleteExercise,s=e.onCancelExercise,o=e.loading,E=void 0!==o&&o,u=e.errorLoading,l=void 0!==u&&u;return n.length>0?a.a.createElement("ul",{className:"list-group shadow-y-sm"},n&&n.filter(function(e){return!e.done}).map(re(c,i)),n&&n.filter(function(e){return e.done}).map(re(s,i))):E?a.a.createElement(Y,{text:"Loading ...",icon:O.p,action:a.a.createElement("p",null,"Your exercises are being loaded")}):l?a.a.createElement(Y,{text:"Error loading your exercises",icon:O.j,action:a.a.createElement("p",null,"Sorry an error occured loading your exercices !")}):a.a.createElement(Y,{text:"You have no exercises yet",icon:R.a,action:a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{className:"btn btn-primary m-1",onClick:function(){return r()}},"Create your first exercise"),a.a.createElement("button",{className:"btn btn-outline-primary m-1"},"Import exercises"))})},ce=function(e){var t=e.loading,n=void 0!==t&&t,r=e.errorLoading,c=void 0!==r&&r,i=e.exercises,s=e.onAddExercise,o=e.onDeleteExercise,E=e.onAcknowledgeExercise,u=e.onCancelExercise;return a.a.createElement(q,{header:a.a.createElement("span",{className:"navbar-brand mb-0 h1"},"Exercises"),headerBackground:{className:"bg-primary",isLight:!1},navItems:[a.a.createElement("button",{key:"nav-new-exercise",className:"btn btn-link nav-link",disabled:n||c,onClick:function(){return s()}},a.a.createElement(v.a,{icon:O.i})," New exercise")]},a.a.createElement(ae,{exercises:i,onAddExercise:s,onDeleteExercise:o,onAcknowledgeExercise:E,onCancelExercise:u,loading:n,errorLoading:c}))},ie=n(54),se=n.n(ie),oe={FETCH_EXERCISES:{REQUEST:"exercises/FETCH_EXERCISES/REQUEST",SUCCESS:"exercises/FETCH_EXERCISES/SUCCESS",FAILURE:"exercises/FETCH_EXERCISES/FAILURE"},FETCH_EXERCISE:{REQUEST:"exercises/FETCH_EXERCISE/REQUEST",SUCCESS:"exercises/FETCH_EXERCISE/SUCCESS",FAILURE:"exercises/FETCH_EXERCISE/FAILURE"},ADD_EXERCISE:{REQUEST:"exercises/ADD_EXERCISE/REQUEST",SUCCESS:"exercises/ADD_EXERCISE/SUCCESS",FAILURE:"exercises/ADD_EXERCISE/FAILURE"},DELETE_EXERCISE:{REQUEST:"exercises/DELETE_EXERCISE/REQUEST",SUCCESS:"exercises/DELETE_EXERCISE/SUCCESS",FAILURE:"exercises/DELETE_EXERCISE/FAILURE"},ACKNOWLEDGE_EXERCISE:{REQUEST:"exercises/ACKNOWLEDGE_EXERCISE/REQUEST",SUCCESS:"exercises/ACKNOWLEDGE_EXERCISE/SUCCESS",FAILURE:"exercises/ACKNOWLEDGE_EXERCISE/FAILURE"},CANCEL_EXERCISE:{REQUEST:"exercises/CANCEL_EXERCISE/REQUEST",SUCCESS:"exercises/CANCEL_EXERCISE/SUCCESS",FAILURE:"exercises/CANCEL_EXERCISE/FAILURE"},UPDATE_EXERCISE_NAME:{REQUEST:"exercises/UPDATE_EXERCISE_NAME/REQUEST",SUCCESS:"exercises/UPDATE_EXERCISE_NAME/SUCCESS",FAILURE:"exercises/UPDATE_EXERCISE_NAME/FAILURE"},ADD_EXERCISE_STEP:{REQUEST:"exercises/ADD_EXERCISE_STEP/REQUEST",SUCCESS:"exercises/ADD_EXERCISE_STEP/SUCCESS",FAILURE:"exercises/ADD_EXERCISE_STEP/FAILURE"},DELETE_EXERCISE_STEP:{REQUEST:"exercises/DELETE_EXERCISE_STEP/REQUEST",SUCCESS:"exercises/DELETE_EXERCISE_STEP/SUCCESS",FAILURE:"exercises/DELETE_EXERCISE_STEP/FAILURE"},ACKNOWLEDGE_EXERCISE_STEP:{REQUEST:"exercises/ACKNOWLEDGE_EXERCISE_STEP/REQUEST",SUCCESS:"exercises/ACKNOWLEDGE_EXERCISE_STEP/SUCCESS",FAILURE:"exercises/ACKNOWLEDGE_EXERCISE_STEP/FAILURE"},CANCEL_EXERCISE_STEP:{REQUEST:"exercises/CANCEL_EXERCISE_STEP/REQUEST",SUCCESS:"exercises/CANCEL_EXERCISE_STEP/SUCCESS",FAILURE:"exercises/CANCEL_EXERCISE_STEP/FAILURE"},UPDATE_EXERCISE_STEP:{REQUEST:"exercises/UPDATE_EXERCISE_STEP/REQUEST",SUCCESS:"exercises/UPDATE_EXERCISE_STEP/SUCCESS",FAILURE:"exercises/UPDATE_EXERCISE_STEP/FAILURE"},MOVE_EXERCISE_STEP:{REQUEST:"exercises/MOVE_EXERCISE_STEP/REQUEST",SUCCESS:"exercises/MOVE_EXERCISE_STEP/SUCCESS",FAILURE:"exercises/MOVE_EXERCISE_STEP/FAILURE"},START_EXERCISE:"exercises/START",STOP_EXERCISE:"exercises/STOP",PAUSE_EXERCISE:"exercises/PAUSE"},Ee=function(){return{type:oe.FETCH_EXERCISES.REQUEST}},ue=function(e){return{type:oe.FETCH_EXERCISES.SUCCESS,exercises:e}},le=function(e){return{type:oe.FETCH_EXERCISES.FAILURE,error:e}},de=function(e){return{type:oe.FETCH_EXERCISE.SUCCESS,exercise:e}},pe=function(e,t){return{type:oe.FETCH_EXERCISE.FAILURE,id:e,error:t}},me=function(e){return{type:oe.ADD_EXERCISE.SUCCESS,exercise:e}},fe=function(e,t){return{type:oe.ADD_EXERCISE.FAILURE,exercise:e,error:t}},Se=function(e){return{type:oe.DELETE_EXERCISE.SUCCESS,id:e}},xe=function(e,t){return{type:oe.DELETE_EXERCISE.FAILURE,id:e,error:t}},be=function(e){return{type:oe.ACKNOWLEDGE_EXERCISE.REQUEST,id:e}},Ce=function(e){return{type:oe.ACKNOWLEDGE_EXERCISE.SUCCESS,exercise:e}},he=function(e,t){return{type:oe.ACKNOWLEDGE_EXERCISE.FAILURE,exerciseId:e,error:t}},Ie=function(e){return{type:oe.CANCEL_EXERCISE.SUCCESS,exercise:e}},ve=function(e,t){return{type:oe.CANCEL_EXERCISE.FAILURE,exerciseId:e,error:t}},Re=function(e){return{type:oe.UPDATE_EXERCISE_NAME.SUCCESS,exercise:e}},Oe=function(e,t){return{type:oe.UPDATE_EXERCISE_NAME.FAILURE,id:e,error:t}},ge=function(e,t){return{type:oe.ACKNOWLEDGE_EXERCISE_STEP.REQUEST,exerciseId:e,stepId:t}},Te=function(e){return{type:oe.ACKNOWLEDGE_EXERCISE_STEP.SUCCESS,exercise:e}},ye=function(e,t,n){return{type:oe.ACKNOWLEDGE_EXERCISE_STEP.FAILURE,exerciseId:e,stepId:t,error:n}},je=function(e){return{type:oe.CANCEL_EXERCISE_STEP.SUCCESS,exercise:e}},we=function(e,t,n){return{type:oe.CANCEL_EXERCISE_STEP.FAILURE,exerciseId:e,stepId:t,error:n}},_e=function(e){return{type:oe.ADD_EXERCISE_STEP.SUCCESS,exercise:e}},ke=function(e,t){return{type:oe.ADD_EXERCISE_STEP.FAILURE,exerciseId:e,error:t}},Ne=function(e,t){switch(e){case"timed":return Object(V.a)({duration:0,rest:0},t,{id:se()(),done:!1});case"repetition":return Object(V.a)({kg:0,repetition:1,rest:0},t,{id:se()(),done:!1});default:throw new Error('Unknown step type "'.concat(e,'"'))}},Ue=function(e){return{type:oe.DELETE_EXERCISE_STEP.SUCCESS,exercise:e}},Ae=function(e,t,n){return{type:oe.DELETE_EXERCISE_STEP.FAILURE,exerciseId:e,stepId:t,error:n}},Le=function(e){return{type:oe.UPDATE_EXERCISE_STEP.SUCCESS,exercise:e}},De=function(e,t,n,r){return{type:oe.DELETE_EXERCISE_STEP.FAILURE,exerciseId:e,stepId:t,contentPatch:n,error:r}},Xe=function(e){return{type:oe.MOVE_EXERCISE_STEP.SUCCESS,exercise:e}},Fe=function(e,t,n,r){return{type:oe.MOVE_EXERCISE_STEP.FAILURE,exerciseId:e,oldIndex:t,newIndex:n,error:r}},Pe=function(e){function t(){return Object(s.a)(this,t),Object(E.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){0===this.props.exercises.length&&this.props.load()}},{key:"render",value:function(){var e=this.props,t=(e.load,Object(p.a)(e,["load"]));return a.a.createElement(ce,t)}}]),t}(r.Component),Qe=Object(m.b)(function(e){return{exercises:f(e),loading:x(e),errorLoading:b(e)}},function(e){return{load:function(){return e(Ee())},onAddExercise:function(){return e(function(){var e={id:se()(),name:"New exercise",type:null,steps:[],done:!1,progress:null};return{type:oe.ADD_EXERCISE.REQUEST,exercise:e}}())},onDeleteExercise:function(t){return e(function(e){return{type:oe.DELETE_EXERCISE.REQUEST,id:e}}(t))},onAcknowledgeExercise:function(t){return e(be(t))},onCancelExercise:function(t){return e(function(e){return{type:oe.CANCEL_EXERCISE.REQUEST,id:e}}(t))}}})(Pe),Me=n(18),He=n(29),Ge=Object(He.SortableHandle)(function(){return a.a.createElement("div",{className:"list-group-item-drag-handle",style:{width:"1em"}},a.a.createElement(v.a,{icon:O.b}))}),Ke=function(e){var t=e.defaultValue,n=e.placeholder,r=e.onChange;return a.a.createElement("input",{type:"number",className:"form-control form-control-sm mx-auto",placeholder:n,defaultValue:"".concat(t),onChange:r,min:"0",max:"999",style:{width:"4em"},required:!0})},We=function(e){var t=e.kg,n=e.repetition,r=e.rest,c=e.onContentChange;return a.a.createElement("div",{className:"d-flex justify-content-between p-3"},a.a.createElement("div",null,a.a.createElement(Ke,{defaultValue:t,placeholder:"Kg",onChange:function(e){return c({kg:parseFloat(e.currentTarget.value)})}})),a.a.createElement("div",null,a.a.createElement(Ke,{defaultValue:n,placeholder:"Repetition",onChange:function(e){return c({repetition:parseFloat(e.currentTarget.value)})}})),a.a.createElement("div",null,a.a.createElement(Ke,{defaultValue:r,placeholder:"Rest",onChange:function(e){return c({rest:parseFloat(e.currentTarget.value)})}})),a.a.createElement(Ge,null))},Ve=function(){return a.a.createElement("header",{className:"list-group-item-header border-top-0 border-left-0 border-right-0 d-flex justify-content-between text-dark text-center"},a.a.createElement("div",{style:{width:"4em"}},a.a.createElement(v.a,{icon:O.e,size:"lg"})),a.a.createElement("div",{style:{width:"4em"}},a.a.createElement(v.a,{icon:O.q,size:"lg"})),a.a.createElement("div",{style:{width:"4em"}},a.a.createElement(v.a,{icon:O.f,size:"lg"})),a.a.createElement("div",{style:{width:"1em"}}))},Be=function(){return a.a.createElement("header",{className:"list-group-item-header border-top-0 border-left-0 border-right-0 d-flex justify-content-between text-dark text-center"},a.a.createElement("div",{style:{width:"4em"}},a.a.createElement(v.a,{icon:O.d,size:"lg"})),a.a.createElement("div",{style:{width:"4em"}},a.a.createElement(v.a,{icon:O.f,size:"lg"})),a.a.createElement("div",{style:{width:"1em"}}))},qe=function(e){var t=e.duration,n=e.rest,r=e.onContentChange;return a.a.createElement("div",{className:"d-flex justify-content-between p-3"},a.a.createElement("div",null,a.a.createElement(Ke,{defaultValue:t,placeholder:"Duration",onChange:function(e){return r({duration:parseFloat(e.currentTarget.value)})}})),a.a.createElement("div",null,a.a.createElement(Ke,{defaultValue:n,placeholder:"Rest",onChange:function(e){return r({rest:parseFloat(e.currentTarget.value)})}})),a.a.createElement(Ge,null))},ze=Object(He.SortableElement)(function(e){var t=e.type,n=e.step,r=n.done,c=Object(p.a)(n,["done"]),i=e.onSwipeLeft,s=e.onSwipeRight,o=e.leftSwipeElement,E=e.rightSwipeElement,u=e.onContentChange;return a.a.createElement(Z,{className:"list-group-item p-0 "+(r?"list-group-item-success":""),onSwipeLeft:i,onSwipeRight:s,leftSwipeElement:o,rightSwipeElement:E},"timed"===t?a.a.createElement(qe,{duration:c.duration,rest:c.rest,onContentChange:u}):a.a.createElement(We,{kg:c.kg,repetition:c.repetition,rest:c.rest,onContentChange:u}))}),Ye=Object(He.SortableContainer)(function(e){var t=e.type,n=e.onSwipeLeft,r=e.onSwipeRight,c=e.leftSwipeElement,i=e.rightSwipeElement,s=e.steps,o=e.onUpdateStep;return a.a.createElement("ul",{className:"list-group list-group-flush"},s.map(function(e,s){return a.a.createElement(ze,{key:"item-".concat(e.id),index:s,type:t,step:e,onSwipeRight:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return r(e)}),onSwipeLeft:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return n(e)}),leftSwipeElement:c,rightSwipeElement:i,onContentChange:o(e.id)})}))}),Je=function(e){function t(e){var n;Object(s.a)(this,t),n=Object(E.a)(this,Object(u.a)(t).call(this,e));var r=e.exercise.name;return n.state={name:r},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.name,t=this.props,n=t.onAddFirstStep,r=t.onDeleteStep,c=t.onAcknowledgeStep,i=t.onCancelStep,s=t.onUpdateStep,o=t.onMoveStep,E=t.onExerciseNameChange,u=t.exercise,l=u.type,d=u.steps;return a.a.createElement("article",{className:"card"},a.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},a.a.createElement("header",{className:"card-body"},a.a.createElement("label",{htmlFor:"exerciseName",className:"d-none"},"Exercise name"),a.a.createElement("input",{type:"text",className:"form-control font-weight-bold text-primary",id:"exerciseName",placeholder:"Your exercise name",defaultValue:e,onChange:function(e){return E(e.currentTarget.value)},autoComplete:"off",required:!0})),a.a.createElement(a.a.Fragment,null,l&&d&&d.length>0?a.a.createElement("section",null,"timed"===l?a.a.createElement(Be,null):a.a.createElement(Ve,null),a.a.createElement(Ye,{type:l,steps:d.filter(function(e){return!e.done}),onSortEnd:function(e){var t=e.oldIndex,n=e.newIndex;return o({oldIndex:t,newIndex:n})},onSwipeLeft:function(e){return c(e.id)},onSwipeRight:function(e){return r(e.id)},leftSwipeElement:a.a.createElement(ee,null),rightSwipeElement:a.a.createElement(te,null),onUpdateStep:s,lockAxis:"y",useDragHandle:!0,helperClass:"list-group-item-sortable-helper"}),a.a.createElement(Ye,{type:l,steps:d.filter(function(e){return e.done}),onSortEnd:function(e){var t=e.oldIndex,n=e.newIndex;return o({oldIndex:t,newIndex:n})},onSwipeLeft:function(e){return i(e.id)},onSwipeRight:function(e){return r(e.id)},leftSwipeElement:a.a.createElement(ne,null),rightSwipeElement:a.a.createElement(te,null),onUpdateStep:s,lockAxis:"y",useDragHandle:!0,helperClass:"list-group-item-sortable-helper"})):a.a.createElement("section",{className:"card-body text-center"},a.a.createElement("p",{className:"card-text lead"},"Choose your exercise type:"),a.a.createElement("button",{type:"button",className:"btn btn-outline-primary m-1",onClick:function(){return n("timed")()}},a.a.createElement(v.a,{icon:O.o})," Time serie"),a.a.createElement("button",{type:"button",className:"btn btn-outline-primary m-1",onClick:function(){return n("repetition")()}},a.a.createElement(v.a,{icon:O.e})," Repetition serie")))))}}]),t}(r.Component),$e=function(){return a.a.createElement(Y,{text:"Loading ...",icon:O.p,action:a.a.createElement("div",null,"Your exercise is being loaded")})},Ze=function(){return a.a.createElement(Y,{text:"Error loading your exercise",icon:O.j,action:a.a.createElement("div",null,"Sorry an error occured loading your exercice !")})},et=function(){return a.a.createElement(Y,{text:"Exercise not found",icon:O.k,action:a.a.createElement(I.a,{className:"btn btn-primary",to:"/"},"Back to exercises")})},tt=function(e){var t=e.filter(function(e){return!e.done});return t.length>0?t[0].id:e.length>0?e[0].id:void 0},nt=function(e){var t=e.loading,n=void 0!==t&&t,r=e.errorLoading,c=void 0!==r&&r,i=e.exercise,s=e.onAddStep,o=e.onDeleteStep,E=e.onAcknowledgeStep,u=e.onCancelStep,l=(e.onStartExercise,e.onUpdateStep),d=e.onMoveStep,p=e.onExerciseNameChange,m=a.a.createElement(I.a,{to:"/",className:"btn btn-link text-dark","aria-label":"Back to exercises list"},a.a.createElement(v.a,{icon:O.q})),f=[n||c||!i||0===i.steps.length?a.a.createElement("button",{key:"nav-start",className:"btn btn-link nav-link btn-block",disabled:!0},a.a.createElement(v.a,{icon:O.h})," Start"):a.a.createElement(I.a,{to:"/".concat(i.id,"/runner/").concat(tt(i.steps)),key:"nav-start",className:"btn btn-link nav-link btn-block"},a.a.createElement(v.a,{icon:O.h})," Start")];return i&&i.type&&(f=[].concat(Object(Me.a)(f),[a.a.createElement("button",{key:"nav-new-step",className:"btn btn-link nav-link btn-block",disabled:n||c,onClick:function(){return s(i.id)(i.type)(i.steps[i.steps.length-1])}},a.a.createElement(v.a,{icon:O.i})," New step")])),a.a.createElement(q,{header:m,navItems:f},n?a.a.createElement($e,null):c?a.a.createElement(Ze,null):i?a.a.createElement(Je,{exercise:i,onAddFirstStep:s(i.id),onDeleteStep:o(i.id),onAcknowledgeStep:E(i.id),onCancelStep:u(i.id),onUpdateStep:l(i.id),onMoveStep:d(i.id),onExerciseNameChange:p(i.id),onStartExercise:function(){}}):a.a.createElement(et,null))},rt=function(e){function t(){return Object(s.a)(this,t),Object(E.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.exercise||this.props.load()}},{key:"render",value:function(){var e=this.props,t=(e.load,Object(p.a)(e,["load"]));return a.a.createElement(nt,t)}}]),t}(r.Component),at=Object(m.b)(function(e,t){return{exercise:S(e)(t.exerciseId),loading:x(e),errorLoading:b(e)}},function(e){return{load:function(){return e(Ee())},onAddStep:function(t){return function(n){return function(r){return e(function(e,t,n){var r=Ne(t,n);return{type:oe.ADD_EXERCISE_STEP.REQUEST,exerciseId:e,stepType:t,step:r}}(t,n,r))}}},onDeleteStep:function(t){return function(n){return e(function(e,t){return{type:oe.DELETE_EXERCISE_STEP.REQUEST,exerciseId:e,stepId:t}}(t,n))}},onAcknowledgeStep:function(t){return function(n){return e(ge(t,n))}},onCancelStep:function(t){return function(n){return e(function(e,t){return{type:oe.CANCEL_EXERCISE_STEP.REQUEST,exerciseId:e,stepId:t}}(t,n))}},onUpdateStep:function(t){return function(n){return function(r){return e(function(e,t,n){return{type:oe.UPDATE_EXERCISE_STEP.REQUEST,exerciseId:e,stepId:t,contentPatch:n}}(t,n,r))}}},onMoveStep:function(t){return function(n){var r=n.oldIndex,a=n.newIndex;return e(function(e,t,n){return{type:oe.MOVE_EXERCISE_STEP.REQUEST,exerciseId:e,oldIndex:t,newIndex:n}}(t,r,a))}},onStartExercise:function(){},onExerciseNameChange:function(t){return function(n){return e(function(e,t){return{type:oe.UPDATE_EXERCISE_NAME.REQUEST,id:e,name:t}}(t,n))}}}})(rt),ct=n(26),it=n(92),st=n(93),ot=(n(244),n(21)),Et={loading:!1,error:null,ids:[],byId:{}},ut=function(e,t){var n=e.ids.filter(function(e){return e!==t}),r=n.reduce(function(t,n){return Object(V.a)({},t,Object(ot.a)({},n,e.byId[n]))},{});return Object(V.a)({},e,{ids:n,byId:r})},lt=Object(ct.combineReducers)({exercises:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe.FETCH_EXERCISES.REQUEST:case oe.FETCH_EXERCISE.REQUEST:return Object(V.a)({},e,{loading:!0,error:null});case oe.FETCH_EXERCISES.SUCCESS:return Object(V.a)({},e,{loading:!1,ids:t.exercises.map(function(e){return e.id}),byId:t.exercises.reduce(function(e,t){return Object(V.a)({},e,Object(ot.a)({},t.id,t))},{})});case oe.FETCH_EXERCISES.FAILURE:case oe.FETCH_EXERCISE.FAILURE:return Object(V.a)({},e,{loading:!1,error:t.error});case oe.ADD_EXERCISE.SUCCESS:case oe.FETCH_EXERCISE.SUCCESS:return Object(V.a)({},e,{loading:!1,ids:[].concat(Object(Me.a)(e.ids),[t.exercise.id]),byId:Object(V.a)({},e.byId,Object(ot.a)({},t.exercise.id,t.exercise))});case oe.DELETE_EXERCISE.SUCCESS:return ut(e,t.id);case oe.ACKNOWLEDGE_EXERCISE.SUCCESS:case oe.CANCEL_EXERCISE.SUCCESS:case oe.ACKNOWLEDGE_EXERCISE_STEP.SUCCESS:case oe.CANCEL_EXERCISE_STEP.SUCCESS:case oe.UPDATE_EXERCISE_NAME.SUCCESS:case oe.ADD_EXERCISE_STEP.SUCCESS:case oe.DELETE_EXERCISE_STEP.SUCCESS:case oe.UPDATE_EXERCISE_STEP.SUCCESS:case oe.MOVE_EXERCISE_STEP.SUCCESS:return Object(V.a)({},e,{byId:Object(V.a)({},e.byId,Object(ot.a)({},t.exercise.id,Object(V.a)({},t.exercise)))});case oe.START_EXERCISE:return e.byId[t.exercise.id]?Object(V.a)({},e,{byId:Object(V.a)({},e.byId,Object(ot.a)({},t.exercise.id,Object(V.a)({},e.byId[t.exercise.id],{progress:Object(V.a)({},e.byId[t.exercise.id].progress,{status:"running",startedAt:new Date})})))}):e;case oe.STOP_EXERCISE:return e.byId[t.exercise.id]?Object(V.a)({},e,{byId:Object(V.a)({},e.byId,Object(ot.a)({},t.exercise.id,Object(V.a)({},e.byId[t.exercise.id],{progress:Object(V.a)({},e.byId[t.exercise.id].progress,{status:"stopped",stoppedAt:new Date})})))}):e;case oe.PAUSE_EXERCISE:return e.byId[t.exercise.id]?Object(V.a)({},e,{byId:Object(V.a)({},e.byId,Object(ot.a)({},t.exercise.id,Object(V.a)({},e.byId[t.exercise.id],{progress:Object(V.a)({},e.byId[t.exercise.id].progress,{status:"paused",pausedAt:new Date})})))}):e;default:return e}},notification:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NOTIFICATION_SHOW":return Object(V.a)({},e,{notification:t.notification});case"NOTIFICATION_HIDE":return Object(V.a)({},e,{notification:void 0});default:return e}}}),dt=n(33),pt=n(94),mt="readwrite",ft=n.n(pt).a.open("oeuf-db",1,function(e){switch(e.oldVersion){case 0:default:e.createObjectStore("exercise",{keyPath:"id"})}}),St=function(){var e=Object(dt.a)(F.a.mark(function e(t){var n,r;return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft;case 2:return n=e.sent,(r=n.transaction("exercise",mt)).objectStore("exercise").put(t),e.next=7,r.complete;case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),xt=function(){var e=Object(dt.a)(F.a.mark(function e(t,n){var r,a,c,i,s;return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft;case 2:return r=e.sent,a=r.transaction("exercise",mt),c=a.objectStore("exercise"),e.next=7,c.get(t);case 7:if(!(i=e.sent)){e.next=16;break}return s=Object(V.a)({},i,n),c.put(s),e.next=13,a.complete;case 13:return e.abrupt("return",s);case 16:throw new Error('Exercise not found (id="'.concat(t,'"")'));case 17:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),bt=function(){var e=Object(dt.a)(F.a.mark(function e(t){var n,r;return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft;case 2:return n=e.sent,(r=n.transaction("exercise",mt)).objectStore("exercise").delete(t),e.abrupt("return",r.complete);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Ct=function(){var e=Object(dt.a)(F.a.mark(function e(){var t;return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft;case 2:return t=e.sent,e.abrupt("return",t.transaction("exercise").objectStore("exercise").getAll());case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),ht=function(){var e=Object(dt.a)(F.a.mark(function e(t){var n;return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft;case 2:return n=e.sent,e.abrupt("return",n.transaction("exercise").objectStore("exercise").get(t));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),It="SERVICEWORKER_REGISTRATION_ERROR",vt=function(e){var t=e.errorMessage,n=e.error;return{type:It,error:n,errorMessage:t}},Rt=function(){return{type:"SERVICEWORKER_REGISTRATION_SUCCESS"}},Ot="SERVICEWORKER_NEW_CONTENT_AVAILABLE",gt=function(){return{type:Ot}},Tt="SERVICEWORKER_CONTENT_CACHED",yt=function(){return{type:Tt}},jt="SERVICEWORKER_OFFLINE",wt=function(){return{offline:!(arguments.length>0&&void 0!==arguments[0])||arguments[0],type:jt}},_t=n(69),kt=F.a.mark(Dt),Nt=F.a.mark(Xt),Ut=F.a.mark(Ft),At=F.a.mark(Pt),Lt=F.a.mark(Qt);function Dt(e){var t;return F.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.errorMessage,n.next=3,Object(P.d)(_({message:t,type:"danger"}));case 3:case"end":return n.stop()}},kt,this)}function Xt(e){return F.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Object(_t.a)(e),t.next=3,Object(P.d)(_({message:"New content is available; please refresh.",actions:[a.a.createElement("a",{key:"refresh-button",href:"",onClick:function(){return window.location.reload()}},"REFRESH")]}));case 3:case"end":return t.stop()}},Nt,this)}function Ft(e){return F.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Object(_t.a)(e),t.next=3,Object(P.d)(_({message:"Content is cached for offline use."}));case 3:case"end":return t.stop()}},Ut,this)}function Pt(e){return F.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.offline){t.next=4;break}return t.next=4,Object(P.d)(_({message:"Offline ? Keep working out it's fine !"}));case 4:case"end":return t.stop()}},At,this)}function Qt(){return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=P.b,e.next=3,Object(P.h)(It,Dt);case 3:return e.t1=e.sent,e.next=6,Object(P.h)(Ot,Xt);case 6:return e.t2=e.sent,e.next=9,Object(P.h)(Tt,Ft);case 9:return e.t3=e.sent,e.next=12,Object(P.h)(jt,Pt);case 12:return e.t4=e.sent,e.t5=[e.t1,e.t2,e.t3,e.t4],e.next=16,(0,e.t0)(e.t5);case 16:case"end":return e.stop()}},Lt,this)}var Mt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ht=function(e){return function(){e(wt(navigator.onLine))}};function Gt(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?t(gt()):t(yt()))}}}).catch(function(e){t(vt({errorMessage:"Error during service worker registration",error:e}))})}var Kt=F.a.mark(bn),Wt=F.a.mark(Cn),Vt=F.a.mark(hn),Bt=F.a.mark(In),qt=F.a.mark(vn),zt=F.a.mark(Rn),Yt=F.a.mark(On),Jt=F.a.mark(gn),$t=F.a.mark(Tn),Zt=F.a.mark(yn),en=F.a.mark(jn),tn=F.a.mark(wn),nn=F.a.mark(_n),rn=F.a.mark(kn),an=F.a.mark(Nn),cn=F.a.mark(Un),sn=F.a.mark(An),on=F.a.mark(Ln),En=F.a.mark(Dn),un=F.a.mark(Xn),ln=F.a.mark(Fn),dn=F.a.mark(Pn),pn=F.a.mark(Qn),mn=F.a.mark(Mn),fn=F.a.mark(Hn),Sn=F.a.mark(Gn),xn=F.a.mark(Kn);function bn(){var e;return F.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(P.c)(Ct);case 3:return e=t.sent,t.next=6,Object(P.d)(ue(e));case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,Object(P.d)(le(t.t0));case 12:case"end":return t.stop()}},Kt,this,[[0,8]])}function Cn(){return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.h)(oe.FETCH_EXERCISES.REQUEST,bn);case 2:case"end":return e.stop()}},Wt,this)}function hn(e){var t,n;return F.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.id,r.prev=1,r.next=4,Object(P.c)(ht,t);case 4:return n=r.sent,r.next=7,Object(P.d)(de(n));case 7:r.next=13;break;case 9:return r.prev=9,r.t0=r.catch(1),r.next=13,Object(P.d)(pe(t,r.t0));case 13:case"end":return r.stop()}},Vt,this,[[1,9]])}function In(){return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.h)(oe.FETCH_EXERCISE.REQUEST,hn);case 2:case"end":return e.stop()}},Bt,this)}function vn(e){var t,n;return F.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.exercise,r.prev=1,r.next=4,Object(P.c)(St,t);case 4:return n=r.sent,r.next=7,Object(P.d)(me(n));case 7:r.next=13;break;case 9:return r.prev=9,r.t0=r.catch(1),r.next=13,Object(P.d)(fe(t,r.t0));case 13:case"end":return r.stop()}},qt,this,[[1,9]])}function Rn(){return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.g)(oe.ADD_EXERCISE.REQUEST,vn);case 2:case"end":return e.stop()}},zt,this)}function On(e){var t;return F.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.id,n.prev=1,n.next=4,Object(P.c)(bt,t);case 4:return n.next=6,Object(P.d)(Se(t));case 6:n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(1),n.next=12,Object(P.d)(xe(t,n.t0));case 12:case"end":return n.stop()}},Yt,this,[[1,8]])}function gn(){return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.g)(oe.DELETE_EXERCISE.REQUEST,On);case 2:case"end":return e.stop()}},Jt,this)}function Tn(e){var t,n,r;return F.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.id,a.prev=1,a.next=4,Object(P.c)(ht,t);case 4:return n=a.sent,a.next=7,Object(P.c)(St,Object(V.a)({},n,{done:!0,steps:n.steps.map(function(e){return Object(V.a)({},e,{done:!0})})}));case 7:return r=a.sent,a.next=10,Object(P.d)(Ce(r));case 10:a.next=16;break;case 12:return a.prev=12,a.t0=a.catch(1),a.next=16,Object(P.d)(he(t,a.t0));case 16:case"end":return a.stop()}},$t,this,[[1,12]])}function yn(){return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.g)(oe.ACKNOWLEDGE_EXERCISE.REQUEST,Tn);case 2:case"end":return e.stop()}},Zt,this)}function jn(e){var t,n,r;return F.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.id,a.prev=1,a.next=4,Object(P.c)(ht,t);case 4:return n=a.sent,a.next=7,Object(P.c)(St,Object(V.a)({},n,{done:!1,steps:n.steps.map(function(e){return Object(V.a)({},e,{done:!1})})}));case 7:return r=a.sent,a.next=10,Object(P.d)(Ie(r));case 10:a.next=16;break;case 12:return a.prev=12,a.t0=a.catch(1),a.next=16,Object(P.d)(ve(t,a.t0));case 16:case"end":return a.stop()}},en,this,[[1,12]])}function wn(){return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.g)(oe.CANCEL_EXERCISE.REQUEST,jn);case 2:case"end":return e.stop()}},tn,this)}function _n(e){var t,n,r;return F.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.id,n=e.name,a.next=3,Object(P.c)(Q.b,500);case 3:return a.prev=3,a.next=6,Object(P.c)(xt,t,{name:n});case 6:return r=a.sent,a.next=9,Object(P.d)(Re(r));case 9:a.next=15;break;case 11:return a.prev=11,a.t0=a.catch(3),a.next=15,Object(P.d)(Oe(t,a.t0));case 15:case"end":return a.stop()}},nn,this,[[3,11]])}function kn(){return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.h)(oe.UPDATE_EXERCISE_NAME.REQUEST,_n);case 2:case"end":return e.stop()}},rn,this)}function Nn(e){var t,n,r,a,c;return F.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.exerciseId,n=e.stepType,r=e.step,i.prev=1,i.next=4,Object(P.c)(ht,t);case 4:return a=i.sent,i.next=7,Object(P.c)(St,Object(V.a)({},a,{type:n,steps:[].concat(Object(Me.a)(a.steps),[r])}));case 7:return c=i.sent,i.next=10,Object(P.d)(_e(c));case 10:i.next=16;break;case 12:return i.prev=12,i.t0=i.catch(1),i.next=16,Object(P.d)(ke(t,i.t0));case 16:case"end":return i.stop()}},an,this,[[1,12]])}function Un(){return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.h)(oe.ADD_EXERCISE_STEP.REQUEST,Nn);case 2:case"end":return e.stop()}},cn,this)}function An(e){var t,n,r,a;return F.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.exerciseId,n=e.stepId,c.prev=1,c.next=4,Object(P.c)(ht,t);case 4:return r=c.sent,c.next=7,Object(P.c)(St,Object(V.a)({},r,{steps:Object(Me.a)(r.steps.filter(function(e){return e.id!==n}))}));case 7:return a=c.sent,c.next=10,Object(P.d)(Ue(a));case 10:c.next=16;break;case 12:return c.prev=12,c.t0=c.catch(1),c.next=16,Object(P.d)(Ae(t,n,c.t0));case 16:case"end":return c.stop()}},sn,this,[[1,12]])}function Ln(){return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.g)(oe.DELETE_EXERCISE_STEP.REQUEST,An);case 2:case"end":return e.stop()}},on,this)}function Dn(e){var t,n,r,a,c;return F.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.exerciseId,n=e.stepId,i.prev=1,i.next=4,Object(P.c)(ht,t);case 4:return r=i.sent,(a=Object(Me.a)(r.steps)).find(function(e){return e.id===n}).done=!0,i.next=9,Object(P.c)(St,Object(V.a)({},r,{steps:a}));case 9:return c=i.sent,i.next=12,Object(P.d)(Te(c));case 12:if(!c.steps.every(function(e){return e.done})){i.next=15;break}return i.next=15,Object(P.d)(be(c.id));case 15:i.next=21;break;case 17:return i.prev=17,i.t0=i.catch(1),i.next=21,Object(P.d)(ye(t,n,i.t0));case 21:case"end":return i.stop()}},En,this,[[1,17]])}function Xn(){return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.g)(oe.ACKNOWLEDGE_EXERCISE_STEP.REQUEST,Dn);case 2:case"end":return e.stop()}},un,this)}function Fn(e){var t,n,r,a,c;return F.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.exerciseId,n=e.stepId,i.prev=1,i.next=4,Object(P.c)(ht,t);case 4:return r=i.sent,(a=Object(Me.a)(r.steps)).find(function(e){return e.id===n}).done=!1,i.next=9,Object(P.c)(St,Object(V.a)({},r,{done:!1,steps:a}));case 9:return c=i.sent,i.next=12,Object(P.d)(je(c));case 12:i.next=18;break;case 14:return i.prev=14,i.t0=i.catch(1),i.next=18,Object(P.d)(we(t,n,i.t0));case 18:case"end":return i.stop()}},ln,this,[[1,14]])}function Pn(){return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.g)(oe.CANCEL_EXERCISE_STEP.REQUEST,Fn);case 2:case"end":return e.stop()}},dn,this)}function Qn(e){var t,n,r,a,c,i;return F.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.exerciseId,n=e.oldIndex,r=e.newIndex,s.prev=1,s.next=4,Object(P.c)(ht,t);case 4:return a=s.sent,c=Object(He.arrayMove)(Object(Me.a)(a.steps),n,r),s.next=8,Object(P.c)(St,Object(V.a)({},a,{done:!1,steps:c}));case 8:return i=s.sent,s.next=11,Object(P.d)(Xe(i));case 11:s.next=17;break;case 13:return s.prev=13,s.t0=s.catch(1),s.next=17,Object(P.d)(Fe(t,n,r,s.t0));case 17:case"end":return s.stop()}},pn,this,[[1,13]])}function Mn(){return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.g)(oe.MOVE_EXERCISE_STEP.REQUEST,Qn);case 2:case"end":return e.stop()}},mn,this)}function Hn(e){var t,n,r,a,c,i,s;return F.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.exerciseId,n=e.stepId,r=e.contentPatch,o.next=3,Object(P.c)(Q.b,500);case 3:return o.prev=3,o.next=6,Object(P.c)(ht,t);case 6:return a=o.sent,c=Object(Me.a)(a.steps),i=c.findIndex(function(e){return e.id===n}),c[i]=Object(V.a)({},c[i],r),o.next=12,Object(P.c)(St,Object(V.a)({},a,{done:!1,steps:c}));case 12:return s=o.sent,o.next=15,Object(P.d)(Le(s));case 15:o.next=21;break;case 17:return o.prev=17,o.t0=o.catch(3),o.next=21,Object(P.d)(De(t,n,r,o.t0));case 21:case"end":return o.stop()}},fn,this,[[3,17]])}function Gn(){return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.h)(oe.UPDATE_EXERCISE_STEP.REQUEST,Hn);case 2:case"end":return e.stop()}},Sn,this)}function Kn(){return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.b)([Cn(),In(),Rn(),gn(),yn(),wn(),kn(),Un(),Ln(),Xn(),Pn(),Mn(),Gn(),K(),Qt()]);case 2:case"end":return e.stop()}},xn,this)}var Wn=Object(Q.a)(),Vn=[st.a,Wn];var Bn=function(e){var t=Object(ct.createStore)(lt,e,Object(it.composeWithDevTools)(ct.applyMiddleware.apply(void 0,Vn)));return Wn.run(Kn),t}();!function(e){if("serviceWorker"in navigator){if(new URL("/oeuf",window.location.href).origin!==window.location.origin)return void e(vt({errorMessage:"Our service worker won't work if PUBLIC_URL is on a different origin"}));window.addEventListener("load",function(){var t="".concat("/oeuf","/service-worker.js");Mt?(function(e,t){fetch(e).then(function(n){404===n.status||-1===n.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Gt(e,t)}).catch(function(){t(wt())})}(t,e),navigator.serviceWorker.ready.then(function(){return e(Rt())})):Gt(t,e)}),window.addEventListener("online",Ht(e)),window.addEventListener("offline",Ht(e))}else e(vt({errorMessage:"Service worker is not supported by your navigator."}))}(Bn.dispatch);var qn=function(e){var t=e.children,n=e.store;return a.a.createElement(m.a,{store:n||Bn},t)},zn=n(253),Yn=n(256),Jn=n(254),$n=function(e){var t=e.history,n=a.a.createElement("button",{className:"btn btn-primary",onClick:function(){return t.goBack()}},"Go back");return a.a.createElement(Y,{icon:O.g,text:"Sorry, page was not found",action:n})},Zn=(n(245),n(247),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(E.a)(this,Object(u.a)(t).call(this,e))).intervalId=void 0,n.timeoutId=void 0,n.clearTimers=function(){n.intervalId&&clearInterval(n.intervalId),n.intervalId=void 0,n.timeoutId&&clearTimeout(n.timeoutId),n.timeoutId=void 0},n.startTimers=function(){n.tick(),n.clearTimers(),n.intervalId=window.setInterval(n.tick,n.props.tick_ms),n.timeoutId=window.setTimeout(n.finish,1e3*n.state.remainingTime)},n.start=function(){"RUNNING"!==n.state.status&&n.state.remainingTime>0&&n.setState({status:"RUNNING"},function(){n.startTimers()})},n.stop=function(){n.clearTimers(),n.setState({status:"STOPPED"})},n.finish=function(){n.clearTimers(),n.setState({status:"FINISHED",remainingTime:0}),n.props.onFinished()},n.reset=function(){n.setState({remainingTime:n.props.totalTime},function(){"RUNNING"===n.state.status&&n.startTimers()})},n.tick=function(){n.setState(function(e){var t=e.remainingTime-n.props.tick_ms/1e3;return t>=0?{remainingTime:t}:{remainingTime:0}})},n.onTapTimer=function(){return"RUNNING"===n.state.status?n.stop():n.start()},n.getStrokeDashoffset=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*(180*Math.PI)},n.state={remainingTime:n.props.totalTime,status:"STOPPED"},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){"rest"===this.props.theme&&this.start()}},{key:"componentWillUnmount",value:function(){this.clearTimers()}},{key:"render",value:function(){var e=this.state,t=e.status,n=e.remainingTime;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,t),a.a.createElement("div",{className:T()("timer-container",{rest:"rest"===this.props.theme}),onClick:this.onTapTimer},a.a.createElement("svg",{className:"timer-svg m-auto d-flex",width:"200",height:"200",version:"1.1",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(-90)"},a.a.createElement("filter",{xmlns:"http://www.w3.org/2000/svg",id:"dropshadow",height:"130%"},a.a.createElement("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"3"}),a.a.createElement("feOffset",{dx:"2",dy:"2",result:"offsetblur"}),a.a.createElement("feComponentTransfer",null,a.a.createElement("feFuncA",{type:"linear",slope:"0.2"})),a.a.createElement("feMerge",null,a.a.createElement("feMergeNode",null),a.a.createElement("feMergeNode",{in:"SourceGraphic"}))),a.a.createElement("circle",{className:"progress-bar",filter:"url(#dropshadow)",r:"90",cx:"100",cy:"100",fill:"transparent",strokeDasharray:"565.48",strokeDashoffset:"0"}),a.a.createElement("circle",{className:"bar",r:"90",cx:"100",cy:"100",fill:"transparent",strokeDasharray:"565.48",strokeDashoffset:this.getStrokeDashoffset(n/this.props.totalTime),style:"RUNNING"===t?{transition:"stroke-dashoffset ".concat(this.props.tick_ms/1e3,"s linear")}:{}})),a.a.createElement("div",{className:"timer-info d-flex"},a.a.createElement("div",{className:"m-auto display-2"},Math.ceil(n)))),a.a.createElement("div",{className:"my-2"},a.a.createElement("button",{className:"btn btn-block btn-link m-1",onClick:this.reset},a.a.createElement(v.a,{flip:"horizontal",icon:O.l})," Reset")))}}]),t}(r.PureComponent));Zn.defaultProps={tick_ms:1e3,theme:"exercise",onFinished:function(){}};var er=function(e){e.onFinished;var t=e.kg,n=e.repetition;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"d-flex justify-content-around align-items-center"},a.a.createElement(v.a,{className:"m-2 display-3",icon:O.e,"aria-label":"weight in kg"}),a.a.createElement("span",{className:"m-2 text-primary display-2"},t)),a.a.createElement("div",{className:"d-flex justify-content-around align-items-center"},a.a.createElement(v.a,{className:"m-2 display-2",icon:O.q,"aria-label":"repetition"}),a.a.createElement("span",{className:"m-2 text-primary display-3"},n)))},tr=n(255),nr=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(E.a)(this,Object(u.a)(t).call(this,e))).goToNextStep=function(){return n.setState({renderNext:!0})},n.finishStepAndRest=function(){n.setState({rest:!0}),n.props.onStepFinished(n.props.steps[n.props.currentStepIndex].id)},n.renderProgress=function(e){var t=n.props.type;if("timed"===t){var r=e;return a.a.createElement(Zn,{totalTime:r.duration,onFinished:n.finishStepAndRest})}if("repetition"===t){var c=e;return a.a.createElement(er,{repetition:c.repetition,kg:c.kg,onFinished:n.finishStepAndRest})}return"Error displaying progress of the exercise, unknown type"},n.state={rest:!1,renderNext:!1},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.exerciseId,n=e.exerciseName,r=e.steps,c=e.currentStepIndex;return a.a.createElement(q,{header:a.a.createElement(a.a.Fragment,null,a.a.createElement(I.a,{to:"/".concat(t),className:"btn btn-link text-dark","aria-label":"Back to exercises list"},a.a.createElement(v.a,{icon:O.q})),"".concat(n," - Step ").concat(c+1)),navItems:[a.a.createElement(a.a.Fragment,null,c>0?a.a.createElement(I.a,{to:"/".concat(t,"/runner/").concat(r[c-1].id),key:"nav-previous",className:"btn btn-link nav-link btn-block"},a.a.createElement(v.a,{icon:O.m})," Previous"):a.a.createElement("button",{key:"nav-previous",className:"btn btn-link nav-link btn-block",disabled:!0},a.a.createElement(v.a,{icon:O.m})," Previous")),a.a.createElement(a.a.Fragment,null,c<r.length-1?a.a.createElement(I.a,{to:"/".concat(t,"/runner/").concat(r[c+1].id),key:"nav-next",className:"btn btn-link nav-link btn-block"},a.a.createElement(v.a,{icon:O.n})," Next"):a.a.createElement("button",{key:"nav-next",className:"btn btn-link nav-link btn-block",disabled:!0},a.a.createElement(v.a,{icon:O.n})," Next"))]},a.a.createElement(z,{className:T()({success:r[c].done})},this.state.rest?a.a.createElement(Zn,{key:"rest-timed-progress",totalTime:r[c].rest,theme:"rest",onFinished:this.goToNextStep}):a.a.createElement(a.a.Fragment,null,this.renderProgress(r[c]),a.a.createElement("div",{className:"d-flex"},a.a.createElement("button",{className:"btn btn-outline-info btn-block m-1",onClick:this.finishStepAndRest},a.a.createElement(v.a,{icon:R.b})," Rest")))),this.state.renderNext&&c<r.length-1&&a.a.createElement(tr.a,{to:"/".concat(t,"/runner/").concat(r[c+1].id)}))}}]),t}(r.PureComponent);nr.defaultProps={currentStepIndex:0};var rr=function(){return a.a.createElement(Y,{text:"Loading ...",icon:O.p,action:a.a.createElement("p",null,"Your exercise is being loaded")})},ar=function(){return a.a.createElement(Y,{text:"Error loading your exercise",icon:O.j,action:a.a.createElement("p",null,"Sorry an error occured loading your exercice !")})},cr=function(){return a.a.createElement(Y,{text:"Exercise not found",icon:O.k,action:a.a.createElement(I.a,{className:"btn btn-primary",to:"/"},"Back to exercises")})},ir=function(){return a.a.createElement(Y,{text:"Step not found",icon:O.k,action:a.a.createElement(I.a,{className:"btn btn-primary",to:"/"},"Back to exercises")})},sr=function(e){function t(){return Object(s.a)(this,t),Object(E.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.exercise||this.props.loadExercise()}},{key:"render",value:function(){var e=this.props,t=e.stepId,n=e.exercise,r=e.onStepFinished,c=e.loading,i=e.errorLoading,s=n?n.steps.findIndex(function(e){return e.id===t}):-1;return c?a.a.createElement(rr,null):i?a.a.createElement(ar,null):n?s<0?a.a.createElement(ir,null):a.a.createElement(nr,{key:"exercise-runner-".concat(n.id,"-").concat(t),exerciseId:n.id,exerciseName:n.name,type:n.type,steps:n.steps,onStepFinished:r,currentStepIndex:s}):a.a.createElement(cr,null)}}]),t}(r.PureComponent),or=Object(m.b)(function(e,t){return{exercise:S(e)(t.exerciseId),loading:x(e),errorLoading:b(e)}},function(e,t){return{loadExercise:function(){return e((n=t.exerciseId,{type:oe.FETCH_EXERCISE.REQUEST,id:n}));var n},onStepFinished:function(){return e(ge(t.exerciseId,t.stepId))}}})(sr),Er=function(e){function t(){return Object(s.a)(this,t),Object(E.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return a.a.createElement(qn,null,a.a.createElement(zn.a,{basename:"/oeuf"},a.a.createElement(d,null,a.a.createElement(Yn.a,null,a.a.createElement(Jn.a,{exact:!0,path:"/",component:Qe}),a.a.createElement(Jn.a,{exact:!0,path:"/:id",component:function(e){var t=e.match;return a.a.createElement(at,{exerciseId:t.params.id})}}),a.a.createElement(Jn.a,{exact:!0,path:"/:exerciseId/runner/:stepId",component:function(e){var t=e.match;return a.a.createElement(or,{exerciseId:t.params.exerciseId,stepId:t.params.stepId})}}),a.a.createElement(Jn.a,{component:$n})))))}}]),t}(r.Component);i.a.render(a.a.createElement(Er,null),document.getElementById("root"))},95:function(e,t,n){e.exports=n(250)}},[[95,2,1]]]);
//# sourceMappingURL=main.18397443.chunk.js.map